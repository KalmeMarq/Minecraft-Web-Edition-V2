var Qe=Object.defineProperty;var ti=(g,t,e)=>t in g?Qe(g,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):g[t]=e;var s=(g,t,e)=>(ti(g,typeof t!="symbol"?t+"":t,e),e);import{C as tt,G as K,T as F,R as I,A as ei,W as ii,S as si,P as ni,L as ri,s as Me,a as ai,B as Jt,J as hi,b as W,c as ye,N as oi,f as ci,d as li,e as Lt,M as bt,D as Ct,g as di,V as Ye,Q as Pe}from"./vendor.8758672c.js";const ui=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}};ui();class M{static getAlpha(t){return t>>>24}static getRed(t){return t>>16&255}static getGreen(t){return t>>8&255}static getBlue(t){return t&255}static getArgb(t,e,i,n){return t<<24|e<<16|i<<8|n}static getRgb(t,e,i){return t<<16|e<<8|i}static getArrayFromRGB(t){return[this.getRed(t),this.getGreen(t),this.getBlue(t)]}static mixColor(t,e){return M.getArgb(M.getAlpha(t)*M.getAlpha(e)/255,M.getRed(t)*M.getRed(e)/255,M.getGreen(t)*M.getGreen(e)/255,M.getBlue(t)*M.getBlue(e)/255)}}class Ne{constructor(t){s(this,"reloaderCount");s(this,"reloadedCount");s(this,"waitingReloaders");this.reloaderCount=t.length,this.reloadedCount=0,this.waitingReloaders=new Set(t),(i=>i.reduce((n,r)=>n.then(()=>(this.waitingReloaders.delete(r),this.reloadedCount++,r.reload())),Promise.resolve()))(t)}getProgress(){return this.reloadedCount/this.reloaderCount}isComplete(){return this.getProgress()===1}}class gi{constructor(){s(this,"container");this.container=new K}init(){}drawBar(t){this.container.clear(),this.container.beginFill(16777215),this.container.drawRect(0,0,200,1),this.container.drawRect(0,1,1,12),this.container.drawRect(0,13,200,1),this.container.drawRect(199,1,1,12),this.container.drawRect(2,2,196*t,10),this.container.endFill()}setProgress(t){this.drawBar(t)}}const It=class{constructor(t,e){s(this,"container");s(this,"mc");s(this,"reload");s(this,"bar");s(this,"completeAfterTimer");s(this,"progress");s(this,"isFading");s(this,"showingLogg",!1);s(this,"logo");s(this,"bg");s(this,"oldW");s(this,"oldH");this.container=new tt,this.mc=t,this.reload=e,this.bar=new gi,this.completeAfterTimer=-1,this.progress=0,this.oldW=0,this.oldH=0,this.isFading=!1,this.container.sortableChildren=!0}init(){const t=window.innerWidth/3,e=window.innerHeight/3;this.oldW=t,this.oldH=e;const i=new K;i.beginFill(this.mc.gameOptions.monochromeLogo?It.MONOCHROME_BLACK:It.MOJANG_RED),i.drawRect(0,0,t,e),i.endFill(),this.bg=i,this.container.addChild(i);let n=this.reload.getProgress();this.progress=this.progress*.95+n*.050000012,this.bar.setProgress(this.progress),this.bar.container.zIndex=10,this.bar.container.position.set(t/2-100,e/1.5-7),this.container.addChild(this.bar.container)}update(t){var n,r,a,h,o,l;const e=this.mc.getScaledWidth(),i=this.mc.getScaledHeight();if(!this.showingLogg&&this.mc.textures["minecraft:textures/gui/title/mojangstudios.png"]){const u=this.mc.textures["minecraft:textures/gui/title/mojangstudios.png"],p=zt.createSprite(u.baseTexture,0,0,0,0,512,256);p.width=128,p.height=64;const x=zt.createSprite(u.baseTexture,128,0,0,256,512,256);x.width=128,x.height=64;const w=new tt;w.position.set(e/2-128,i/1.5-7-14-64-20),w.addChild(p,x),this.container.addChild(w),this.showingLogg=!0,this.logo=w}(this.oldH!==i||this.oldW!==e)&&((n=this.bg)==null||n.clear(),(r=this.bg)==null||r.beginFill(this.mc.gameOptions.monochromeLogo?It.MONOCHROME_BLACK:It.MOJANG_RED),(a=this.bg)==null||a.drawRect(0,0,e,i),(h=this.bg)==null||h.endFill()),this.progress=this.progress*.95+this.reload.getProgress()*.05,this.bar.setProgress(this.progress),this.bar.container.position.set(e/2-100,i/1.5-7),(o=this.logo)==null||o.position.set(e/2-128,i/1.5-7-14-64-20),this.completeAfterTimer!==-1&&this.completeAfterTimer++,this.isFading?this.container.alpha-=t*.05:.99999-this.progress<9e-5&&(this.isFading=!0,(l=this.mc.screen)==null||l.initScreen(this.mc,this.mc.getScaledWidth(),this.mc.getScaledHeight())),this.container.alpha<=0&&this.mc.setOverlay(null)}};let At=It;s(At,"MOJANG_RED",M.getRgb(239,50,61)),s(At,"MONOCHROME_BLACK",M.getRgb(0,0,0)),s(At,"PRISMARINE",M.getRgb(96,164,144));const V=class{constructor(t,e,i,n,r,a,h){s(this,"image");s(this,"texture");s(this,"offsetX");s(this,"offsetY");s(this,"width");s(this,"height");s(this,"advance");s(this,"ascent");this.image=t,this.offsetX=e,this.offsetY=i,this.width=n,this.height=r,this.advance=a,this.ascent=h,this.texture=new F(this.image.baseTexture,new I(this.offsetX,this.offsetY,this.width,this.height))}static getColorAtPixel(t,e,i){const n=4*(t.width*i+e);return{r:t.data[n+0],g:t.data[n+1],b:t.data[n+2],a:t.data[n+3]}}static getActualGlyphWidth(t,e,i,n,r){(V.TEMPCTX.canvas.width!==n||V.f)&&(V.TEMPCTX.canvas.width=n),(V.TEMPCTX.canvas.height!==r||V.f)&&(V.TEMPCTX.canvas.height=r),V.TEMPCTX.drawImage(t,e,i,n,r,0,0,n,r);const a=V.TEMPCTX.getImageData(0,0,n,r);let h;for(h=n-1;h>=0;--h)for(let o=0;o<r;++o)if(V.getColorAtPixel(a,h,o).a!==0)return h+1;return h+1}getAdvance(){return this.advance}bearingY(){return 7-this.ascent-3*2+6}};let Dt=V;s(Dt,"TEMPCTX",document.createElement("canvas").getContext("2d")),s(Dt,"f",!0),(()=>{V.TEMPCTX.imageSmoothingEnabled=!1})();const C=class{constructor(t,e,i,n,r){s(this,"name");s(this,"code");s(this,"modifier");s(this,"stringValue");s(this,"colorIndex");s(this,"colorValue");C.ALL_VALUES.push(this),typeof i=="boolean"&&n===void 0?(this.name=t,this.code=e,this.modifier=i,this.colorIndex=-1,this.colorValue=null,this.stringValue="\xA7"+e):typeof i=="number"?(this.name=t,this.code=e,this.modifier=!1,this.colorIndex=i,this.colorValue=n,this.stringValue="\xA7"+e):(this.name=t,this.code=e,this.modifier=i,this.colorIndex=n,this.colorValue=r,this.stringValue="\xA7"+e)}getName(){return this.colorValue?"#"+this.colorValue:this.name}getCode(){return this.code}getColorIndex(){return this.colorIndex}isModifier(){return this.modifier}isColor(){return!this.modifier&&this!==C.RESET}getColorValue(){return this.colorValue}toString(){return this.stringValue}[Symbol.toString()](){return this.stringValue}static byCode(t){const e=t.toString().toLowerCase().charAt(0);for(const i of C.values())if(i.code==e)return i;return null}static values(){return C.ALL_VALUES}};let f=C;s(f,"ALL_VALUES",[]),s(f,"BLACK",new C("BLACK","0",0,0)),s(f,"DARK_BLUE",new C("DARK_BLUE","1",1,170)),s(f,"DARK_GREEN",new C("DARK_GREEN","2",2,43520)),s(f,"DARK_AQUA",new C("DARK_AQUA","3",3,43690)),s(f,"DARK_RED",new C("DARK_RED","4",4,11141120)),s(f,"DARK_PURPLE",new C("DARK_PURPLE","5",5,11141290)),s(f,"GOLD",new C("GOLD","6",6,16755200)),s(f,"GRAY",new C("GRAY","7",7,11184810)),s(f,"DARK_GRAY",new C("DARK_GRAY","8",8,5592405)),s(f,"BLUE",new C("BLUE","9",9,5592575)),s(f,"GREEN",new C("GREEN","a",10,5635925)),s(f,"AQUA",new C("AQUA","b",11,5636095)),s(f,"RED",new C("RED","c",12,16733525)),s(f,"LIGHT_PURPLE",new C("LIGHT_PURPLE","d",13,16733695)),s(f,"YELLOW",new C("YELLOW","e",14,16777045)),s(f,"WHITE",new C("WHITE","f",15,16777215)),s(f,"OBFUSCATED",new C("OBFUSCATED","k",!0)),s(f,"BOLD",new C("BOLD","l",!0)),s(f,"STRIKETHROUGH",new C("STRIKETHROUGH","m",!0)),s(f,"UNDERLINE",new C("UNDERLINE","n",!0)),s(f,"ITALIC",new C("ITALIC","o",!0)),s(f,"RESET",new C("RESET","r",-1,null));const _t=class{constructor(t,e){s(this,"rgb");s(this,"name");this.rgb=t,this.name=e!=null?e:null}getRgb(){return this.rgb}getName(){return this.name!==null?this.name:this.getHexCode()}getHexCode(){return`#${(this.rgb>>16&255).toString(16)}${(this.rgb>>8&255).toString(16)}${(this.rgb&255).toString(16)}`}static fromFormatting(t){return _t.FORMATTING_TO_COLOR.get(t)}static fromRgb(t){return new _t(t)}};let mt=_t;s(mt,"FORMATTING_TO_COLOR",new Map(f.values().filter(t=>t.isColor()).map(t=>[t,new _t(t.getColorValue(),t.getName())])));class ${constructor(t,e){s(this,"namespace");s(this,"path");if(e)this.path=e,this.namespace=t;else{const i=this.splitLocation(t);this.path=i.path,this.namespace=i.namespace}}splitLocation(t){const e=t.substring(0,t.indexOf(":"));return{namespace:e.length===0?"minecraft":e,path:t.substring(t.indexOf(":")+1,t.length)}}getFullPath(){return`${this.namespace}:${this.path}`}equals(t){return t===this?!0:t instanceof $?t.namespace===this.namespace&&t.path===this.path:!1}}const A=class{constructor(t,e,i,n,r,a,h){s(this,"color");s(this,"bold");s(this,"italic");s(this,"underlined");s(this,"strikethrough");s(this,"insertion");s(this,"font");this.color=t,this.bold=e,this.italic=i,this.underlined=n,this.strikethrough=r,this.insertion=a,this.font=h}getColor(){return this.color}isBold(){return!!this.bold}isItalic(){return!!this.italic}isUnderlined(){return!!this.underlined}isStrikethrough(){return!!this.strikethrough}getInsertion(){return this.insertion}isEmpty(){return this===A.EMPTY}getFont(){return this.font!==null?this.font:A.DEFAULT_FONT_ID}withColor(t){return typeof t=="number"?new A(mt.fromRgb(t),this.bold,this.italic,this.underlined,this.strikethrough,this.insertion,this.font):t instanceof f?this.withColor(t!==null?mt.fromFormatting(t):null):new A(t,this.bold,this.italic,this.underlined,this.strikethrough,this.insertion,this.font)}withBold(t){return new A(this.color,t,this.italic,this.underlined,this.strikethrough,this.insertion,this.font)}withItalic(t){return new A(this.color,this.bold,t,this.underlined,this.strikethrough,this.insertion,this.font)}withUnderline(t){return new A(this.color,this.bold,this.italic,t,this.strikethrough,this.insertion,this.font)}withStrikethrough(t){return new A(this.color,this.bold,this.italic,this.underlined,t,this.insertion,this.font)}withInsertion(t){return new A(this.color,this.bold,this.italic,this.underlined,this.strikethrough,t,this.font)}withFont(t){return new A(this.color,this.bold,this.italic,this.underlined,this.strikethrough,this.insertion,t)}withFormatting(t){let e=this.color,i=this.bold,n=this.italic,r=this.strikethrough,a=this.underlined;switch(t){case f.BOLD:{i=!0;break}case f.STRIKETHROUGH:{r=!0;break}case f.UNDERLINE:{a=!0;break}case f.ITALIC:{n=!0;break}case f.RESET:return A.EMPTY;default:e=mt.fromFormatting(t)}return new A(e,i,n,r,a,this.insertion,this.font)}withFormattings(...t){let e=this.color,i=this.bold,n=this.italic,r=this.strikethrough,a=this.underlined;t:for(const h of t)switch(h){case f.BOLD:{i=!0;continue t}case f.STRIKETHROUGH:{r=!0;continue t}case f.UNDERLINE:{a=!0;continue t}case f.ITALIC:{n=!0;continue t}case f.RESET:return A.EMPTY;default:e=mt.fromFormatting(h)}return new A(e,i,n,a,r,this.insertion,this.font)}withExclusiveFormatting(t){let e=this.color,i=this.bold,n=this.italic,r=this.strikethrough,a=this.underlined;switch(t){case f.BOLD:{i=!0;break}case f.STRIKETHROUGH:{r=!0;break}case f.UNDERLINE:{a=!0;break}case f.ITALIC:{n=!0;break}case f.RESET:return A.EMPTY;default:i=!1,r=!1,a=!1,n=!1,e=mt.fromFormatting(t)}return new A(e,i,n,a,r,this.insertion,this.font)}withParent(t){return this===A.EMPTY?t:t===A.EMPTY?this:new A(this.color!==null?this.color:t.color,this.bold!==null?this.bold:t.bold,this.italic!==null?this.italic:t.italic,this.underlined!==null?this.underlined:t.underlined,this.strikethrough!==null?this.strikethrough:t.strikethrough,this.insertion!==null?this.insertion:t.insertion,this.font!==null?this.font:t.font)}};let D=A;s(D,"DEFAULT_FONT_ID",new $("minecraft:default")),s(D,"EMPTY",new A(null,null,null,null,null,null,null));class b{isEmpty(){return!this.isPresent()}static of(t){if(t!=null)return new Be(t);throw new TypeError("The passed value was null or undefined.")}static ofNonNull(t){return b.of(t)}static ofNullable(t){return t!=null?new Be(t):new ee}static empty(){return new ee}static from(t){switch(t.kind){case"present":return b.of(t.value);case"empty":return b.empty();default:throw new TypeError("The passed value was not an Option type.")}}}class Be extends b{constructor(t){super();s(this,"payload");this.payload=t}isPresent(){return!0}get(){return this.payload}ifPresent(t){t(this.payload)}ifPresentOrElse(t,e){t(this.payload)}filter(t){return t(this.payload)?this:b.empty()}map(t){const e=t(this.payload);return b.ofNullable(e)}flatMap(t){return t(this.payload)}or(t){return this}orElse(t){return this.payload}orElseGet(t){return this.payload}orElseThrow(t){return this.payload}orNull(){return this.payload}orUndefined(){return this.payload}toOption(){return{kind:"present",value:this.payload}}matches(t){return t.present(this.payload)}toJSON(t){return this.payload}}class ee extends b{isPresent(){return!1}constructor(){super()}get(){throw new TypeError("The optional is not present.")}ifPresent(t){}ifPresentOrElse(t,e){e()}filter(t){return this}map(t){return b.empty()}flatMap(t){return b.empty()}or(t){return t()}orElse(t){return t}orElseGet(t){return this.orElse(t())}orElseThrow(t){throw t()}orNull(){return null}orUndefined(){}toOption(){return{kind:"empty"}}matches(t){return t.empty()}toJSON(t){return null}}class Xt{constructor(t){s(this,"string","");this.string+=t!=null?t:""}append(t){return this.string+=t.toString(),this}delete(t,e){const i=this.string.substring(0,t),n=this.string.substring(e,this.string.length);return this.string=i+n,this}deleteChar(t){return this.delete(t,t+1),this}indexOf(t,e=0){return this.string.indexOf(t,e)}lastIndexOf(t,e=0){return this.string.lastIndexOf(t,e)}replace(t,e,i){const n=this.string.substring(0,t),r=this.string.substring(e,this.string.length);return this.string=n+i+r,this}reverse(){let t="";for(let e=this.string.length-1;e>=0;e--)t+=this.string[e];return this.string=t,this}length(){return this.string.length}substring(t,e){return this.string.substring(t,e!=null?e:this.string.length)}setCharAt(t,e){this.replace(t,t+1,e)}toString(){return this.string}}class R{static visitRegularCharacter(t,e,i,n){return e(i,t,n)}static visitForwards(t,e,i){const n=t.length;for(let r=0;r<n;++r){const a=t.charAt(r);if(!R.visitRegularCharacter(e,i,r,a))return!1}return!0}static visitBackwards(t,e,i){const n=t.length;for(let r=n-1;r>=0;--r){const a=t.charAt(r);if(!R.visitRegularCharacter(e,i,r,a))return!1}return!0}static visitFormatted(t,e,i,n=0,r=e){if(typeof t=="string"){const a=t.length;let h=e;for(let o=n;o<a;++o){let l,u=t.charAt(o);if(u=="\xA7"){if(o+1>=a)break;l=t.charAt(o+1);let p=f.byCode(l);p!==null&&(h=p==f.RESET?r:h.withExclusiveFormatting(p)),++o;continue}if(!R.visitRegularCharacter(h,i,o,u))return!1}return!0}else return!t.visitStyle((a,h)=>R.visitFormatted(h,a,i,0)?b.empty():ee.empty(),e).isPresent()}static removeFormattingCodes(t){const e=new Xt;return R.visitFormatted(t,D.EMPTY,(i,n,r)=>(e.append(r),!0)),e.toString()}}const H=class{static styled(t,e){return new class extends H{accept(i){return i(0,e,t)}}}static styledForwardsVisitedString(t,e){return t.length<1?H.EMPTY:new class extends H{accept(i){return R.visitForwards(t,e,i)}}}static styledBackwardsVisitedString(t,e){return t.length<1?H.EMPTY:new class extends H{accept(i){return R.visitBackwards(t,e,i)}}}static empty(){return H.EMPTY}static of(t){return t}static concat(t){switch(t.length){case 0:return H.EMPTY;case 1:return t[0];case 2:return H.innerConcat([t[0],t[1]])}return H.innerConcat(t)}static innerConcat(t){return new class extends H{accept(e){for(const i of t)if(!i.accept(e))return!1;return!0}}}};let vt=H;s(vt,"EMPTY",new class extends H{accept(t){return!0}});const Rt=class{static create(){const t=new Map;return new class extends Rt{constructor(){super(...arguments);s(this,"map",t)}get(e){var i;return(i=this.map.get(e))!=null?i:e}hasTranslation(e){return this.map.has(e)}isRightToLeft(){return!1}reorder(e){return new class extends vt{accept(i){return e.visitStyle((n,r)=>(R.visitFormatted(r,n,i),b.empty()),D.EMPTY).isPresent()}}}}}static getInstance(){return Rt.instance}static setInstance(t){Rt.instance=t}};let Et=Rt;s(Et,"DEFAULT_LANGUAGE","en_us"),s(Et,"instance",Rt.create());class ie{constructor(t,e,i,n){s(this,"code");s(this,"region");s(this,"name");s(this,"rightToLeft");this.code=t,this.region=e,this.name=i,this.rightToLeft=n}getCode(){return this.code}getName(){return this.name}getRegion(){return this.region}isRightToLeft(){return this.rightToLeft}toString(){return`${this.name} (${this.region})`}[Symbol.toString()](){return`${this.name} (${this.region})`}equals(t){return this===t?!0:t instanceof ie?this.code===t.code:!1}}class Le extends Et{constructor(t,e){super();s(this,"translations");s(this,"rightToLeft");this.translations=t,this.rightToLeft=e}static async load(t){const e=new Map;let i=!1;for(const n of t){i||(i=n.isRightToLeft());const r=JSON.parse(await y.getInstance().vanillaZip.file(`assets/minecraft/lang/${n.getCode()}.json`).async("text"));Object.entries(r).forEach(([a,h])=>{e.set(a,h)})}return new Le(new Map(e),i)}get(t){var e;return(e=this.translations.get(t))!=null?e:t}hasTranslation(t){return this.translations.has(t)}isRightToLeft(){return this.rightToLeft}reorder(t){return new class extends vt{accept(e){return t.visitStyle((i,n)=>(R.visitFormatted(n,i,e),b.empty()),D.EMPTY).isPresent()}}}}const wt=class{constructor(t){s(this,"languageDefs",new Map([["en_us",wt.ENGLISH_US]]));s(this,"currentLanguageCode");s(this,"language",wt.ENGLISH_US);this.currentLanguageCode=t}static async loadAvailableLanguages(){const t=JSON.parse(await y.getInstance().vanillaZip.file("pack.mcmeta").async("text")),e=new Map;for(const[i,n]of Object.entries(t.language))e.set(i,new ie(i,n.region,n.name,n.bidirectional));return e}async reload(){var n,r;this.languageDefs=await wt.loadAvailableLanguages();const t=(n=this.languageDefs.get(wt.DEFAULT_LANGUAGE_CODE))!=null?n:wt.ENGLISH_US;this.language=(r=this.languageDefs.get(this.currentLanguageCode))!=null?r:t;const e=[t];this.language!==t&&e.push(this.language);const i=await Le.load(e);Et.setInstance(i)}setLanguage(t){this.currentLanguageCode=t.getCode(),this.language=t}getLanguage(t){return t?this.languageDefs.get(t):this.language}getAllLanguages(){return new Set(Array.from(this.languageDefs.values()).sort((t,e)=>t.getCode()<e.getCode()?-1:t.getCode()>e.getCode()?1:0))}};let qt=wt;s(qt,"DEFAULT_LANGUAGE_CODE","en_us"),s(qt,"ENGLISH_US",new ie("en_us","US","English",!1));const Ae=class{constructor(){s(this,"splashTexts");this.splashTexts=[]}async reload(){(await y.getInstance().vanillaZip.file(`assets/minecraft/${Ae.RESOURCE.path}`).async("text")).split(`
`).forEach(e=>{this.splashTexts.push(e.trim())})}get(){const t=new Date;return t.getMonth()+1===12&&t.getDate()===24?"Merry X-mas!":t.getMonth()+1===1&&t.getDate()===1?"Happy new year!":t.getMonth()+1===10&&t.getDate()===31?"OOoooOOOoooo! Spooky!":this.splashTexts.length<1?"missingno":this.splashTexts[Math.round(Math.random()*this.splashTexts.length)]}};let me=Ae;s(me,"RESOURCE",new $("texts/splashes.txt"));const Ht=class{constructor(t){s(this,"mc");s(this,"cX");s(this,"cY");this.mc=t,this.cX=-1,this.cY=-1}cursorMove(t,e){if(this.mc.overlay===null&&this.mc.screen){const i=t/(window.innerWidth/this.mc.getScaledWidth()),n=e/(window.innerHeight/this.mc.getScaledHeight()),r=(t-this.cX)/(window.innerWidth/this.mc.getScaledWidth()),a=(e-this.cY)/(window.innerHeight/this.mc.getScaledHeight());this.mc.screen.mouseDragged(i,n,0,r,a)}this.cX=t,this.cY=e}cursorButton(t,e,i,n){if(this.mc.overlay===null&&this.mc.screen){const r=t/(window.innerWidth/this.mc.getScaledWidth()),a=e/(window.innerHeight/this.mc.getScaledHeight());n===1?this.mc.screen.mouseClicked(r,a,i):this.mc.screen.mouseReleased(r,a,i)}}keyPress(t,e,i,n){if(this.mc.overlay===null&&this.mc.screen){let r=!1;if(n===1?r=this.mc.screen.keyPressed(t,e,i):r=this.mc.screen.keyReleased(t,e,i),r)return;n===0&&e==="F3"&&(this.mc.gameOptions.debugEnabled=!this.mc.gameOptions.debugEnabled)}}onChar(t){const e=this.mc.screen;if(!(e==null||this.mc.overlay!==null))for(const i of t)e.charTyped(i)}scroll(t,e){const i=(this.mc.gameOptions.discreteMouseScroll?Math.sign(-e):-e)*this.mc.gameOptions.mouseWheelSensitivity;if(this.mc.overlay===null&&this.mc.screen!==null){const n=this.cX*this.mc.getScaledWidth()/window.innerWidth,r=this.cY*this.mc.getScaledHeight()/window.innerHeight;this.mc.screen.mouseScroll(n,r,i/500)}}filesDropped(t){var e;this.mc.overlay===null&&((e=this.mc.screen)==null||e.filesDragged(t))}setup(){document.addEventListener("drop",t=>{t.preventDefault();const e=[];if(t.dataTransfer&&t.dataTransfer.items){for(let i=0;i<t.dataTransfer.items.length;i++)if(t.dataTransfer.items[i].kind==="file"){const n=t.dataTransfer.items[i].getAsFile();n&&e.push(n)}this.filesDropped(e)}}),document.addEventListener("dragstart",t=>{t.preventDefault()}),document.addEventListener("drag",t=>{t.preventDefault()}),document.addEventListener("dragend",t=>{t.preventDefault()}),document.addEventListener("dragleave",t=>{t.preventDefault()}),document.addEventListener("dragover",t=>{t.preventDefault()}),document.addEventListener("wheel",t=>{t.preventDefault(),t.stopPropagation(),this.scroll(t.deltaY,t.deltaY)},{passive:!1}),document.addEventListener("scroll",t=>{t.preventDefault(),t.stopPropagation()},{passive:!1}),document.addEventListener("DOMMouseScroll",t=>{t.preventDefault(),t.stopPropagation()},{passive:!1}),document.addEventListener("mousemove",t=>this.cursorMove(t.clientX,t.clientY)),document.addEventListener("mousedown",t=>this.cursorButton(t.clientX,t.clientY,t.button,1)),document.addEventListener("mouseup",t=>this.cursorButton(t.clientX,t.clientY,t.button,0)),document.addEventListener("keydown",t=>{t.preventDefault(),t.code==="F2"&&this.mc.screenshot(),Ht.codes[t.code]=!0,this.keyPress(t.key,t.code,t.keyCode,1),["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9","_"," ","(",")","[","]","{","}","!",'"',"'","#","$","%","&","/","=","?","|","\\","@","\xA3","\xA7","*","+","`","\xB4","^","~",",",";",".",":","-","\xE7","\xAB","\xBB","<",">","\xE3","\xE1","\xE0","\xE2","\xE4","\xE9","\xE8","\xEA","\xEB","\xED","\xEC","\xEE","\xF5","\xF3","\xF2","\xF4","\xF6","\xFA","\xF9","\xFB","\xFC","\xBA","\xAA","\xC3","\xC1","\xC0","\xC2","\xC4","\xC9","\xC8","\xCA","\xCB","\xCD","\xCC","\xCE","\xCF","\xD5","\xD3","\xD2","\xD4","\xD6","\xDA","\xD9","\xDB","\xDC","\xFD","\xFF","\xF1","\xA8"].includes(t.key)&&(t.ctrlKey||this.onChar(t.key))}),document.addEventListener("keyup",t=>{t.preventDefault(),Ht.codes[t.code]=!1,this.keyPress(t.key,t.code,t.keyCode,0)})}static isKeyPressed(t){return Ht.codes[t]}getX(){return this.cX}getY(){return this.cY}};let Z=Ht;s(Z,"codes",{});class P{static clamp(t,e,i){return Math.min(i,Math.max(t,e))}static mod(t,e){return t%e}}const et=class{constructor(t,e){s(this,"id");s(this,"translationKey");et.ALL_VALUES.push(this),this.id=t,this.translationKey=e}getId(){return this.id}getTranslationKey(){return this.translationKey}static byId(t){return et.ALL_VALUES[P.mod(t,et.ALL_VALUES.length)]}static values(){return et.ALL_VALUES}};let j=et;s(j,"ALL_VALUES",[]),s(j,"OFF",new et(0,"options.ao.off")),s(j,"MIN",new et(1,"options.ao.min")),s(j,"MAX",new et(2,"options.ao.max"));const it=class{constructor(t,e){s(this,"id");s(this,"translationKey");it.ALL_VALUES.push(this),this.id=t,this.translationKey=e}getId(){return this.id}getTranslationKey(){return this.translationKey}static byId(t){return it.ALL_VALUES[P.mod(t,it.ALL_VALUES.length)]}static values(){return it.ALL_VALUES}};let ct=it;s(ct,"ALL_VALUES",[]),s(ct,"OFF",new it(0,"options.off")),s(ct,"CROSSHAIR",new it(1,"options.attack.crosshair")),s(ct,"HOTBAR",new it(2,"options.attack.hotbar"));const st=class{constructor(t,e){s(this,"id");s(this,"translationKey");st.ALL_VALUES.push(this),this.id=t,this.translationKey=e}getId(){return this.id}getTranslationKey(){return this.translationKey}static byId(t){return st.ALL_VALUES[P.mod(t,st.ALL_VALUES.length)]}static values(){return st.ALL_VALUES}};let lt=st;s(lt,"ALL_VALUES",[]),s(lt,"FULL",new st(0,"options.chat.visibility.full")),s(lt,"SYSTEM",new st(1,"options.chat.visibility.system")),s(lt,"HIDDEN",new st(2,"options.chat.visibility.hidden"));const St=class{constructor(t){s(this,"translationKey");St.ALL_VALUES.push(this),this.translationKey=t}static values(){return St.ALL_VALUES}getTranslationKey(){return this.translationKey}};let Y=St;s(Y,"ALL_VALUES",[]),s(Y,"OFF",new St("OFF")),s(Y,"FAST",new St("Fast")),s(Y,"FANCY",new St("Fancy"));const G=class{constructor(t,e){s(this,"id");s(this,"translationKey");G.ALL_VALUES.push(this),this.id=t,this.translationKey=e}getId(){return this.id}getTranslationKey(){return this.translationKey}toString(){switch(this){case G.FAST:return"fast";case G.FANCY:return"fancy";case G.FABULOUS:return"fabulous"}return"null"}static byId(t){return G.ALL_VALUES[P.mod(t,G.ALL_VALUES.length)]}static values(){return G.ALL_VALUES}};let z=G;s(z,"ALL_VALUES",[]),s(z,"FAST",new G(0,"options.graphics.fast")),s(z,"FANCY",new G(1,"options.graphics.fancy")),s(z,"FABULOUS",new G(2,"options.graphics.fabulous"));const Ot=class{static plain(t){return new class extends Ot{visit(e){return e(t)}visitStyle(e,i){return e(i,t)}}}static styled(t,e){return new class extends Ot{visit(i){return i(t)}visitStyle(i,n){return i(e.withParent(n),t)}}}static concat(t){return new class extends Ot{visit(e){for(const i of t){const n=i.visit(e);if(!!n.isPresent())return n}return b.empty()}visitStyle(e,i){for(const n of t){const r=n.visitStyle(e,i);if(!!r.isPresent())return r}return b.empty()}}}getString(){const t=new Xt;return this.visit(e=>(t.append(e),b.empty())),t.toString()}};let X=Ot;s(X,"EMPTY",new class extends Ot{visit(t){return b.empty()}visitStyle(t,e){return b.empty()}});class Ke extends X{getString(){return this.getString()}asTruncatedString(t){const e=new Xt;return this.visit(i=>{const n=t-e.length();return n<=0?ee.empty():(e.append(i.length<=n?i:i.substring(0,n)),b.empty())}),e.toString()}visitStyle(t,e){const i=this.getStyle().withParent(e);let n=this.visitStyleSelf(t,i);if(n.isPresent())return n;for(const r of this.getSiblings()){const a=r.visitStyle(t,i);if(!!a.isPresent())return a}return b.empty()}visit(t){const e=this.visitSelf(t);if(e.isPresent())return e;for(const i of this.getSiblings()){const n=i.visit(t);if(!!n.isPresent())return n}return b.empty()}visitStyleSelf(t,e){return t(e,this.asString())}visitSelf(t){return t(this.asString())}getWithStyle(t){const e=[];return this.visitStyle((i,n)=>(n.length<1&&e.push(new E(n).fillStyle(i)),b.empty()),t),e}static of(t){return t!==null?new E(t):E.EMPTY}}class pi extends Ke{appendString(t){return this.append(new E(t))}styled(t){return this.setStyle(t(this.getStyle())),this}fillStyle(t){return this.setStyle(t.withParent(this.getStyle())),this}formatted(...t){return this.setStyle(this.getStyle().withFormattings(...t)),this}}class Xe extends pi{constructor(){super(...arguments);s(this,"siblings",[]);s(this,"orderedText",vt.EMPTY);s(this,"style",D.EMPTY);s(this,"previousLanguage",null)}append(t){return this.siblings.push(t),this}asString(){return""}getSiblings(){return this.siblings}setStyle(t){return this.style=t,this}getStyle(){return this.style}shallowCopy(){const t=this.copy();return t.siblings.push(...this.siblings),t.setStyle(this.style),t}asOrderedText(){const t=Et.getInstance();return this.previousLanguage!=t&&(this.orderedText=t.reorder(this),this.previousLanguage=t),this.orderedText}[Symbol.toString()](){return"BaseComponent{style="+this.style+", siblings="+this.siblings+"}"}}const ne=class extends Xe{constructor(t){super();s(this,"string");this.string=t}getRawString(){return this.string}asString(){return this.string}copy(){return new ne(this.string)}[Symbol.toString()](){return"TextComponent{text='"+this.string+"', siblings="+this.siblings+", style="+this.getStyle()+"}"}};let E=ne;s(E,"EMPTY",new ne(""));const Vt=class extends Xe{constructor(t,...e){super();s(this,"key");s(this,"args");s(this,"languageCache",null);s(this,"translations",[]);this.key=t,this.args=e}copy(){return new Vt(this.key,this.args)}updateTranslations(){const t=Et.getInstance();if(t===this.languageCache)return;this.languageCache=t;const e=t.get(this.key);let i=[];this.forEachPart(e,n=>{i.push(n),n instanceof Vt&&n.updateTranslations()}),this.translations=i}forEachPart(t,e){const i=t.split(/%s/g);for(let n=0;n<i.length;n++)i[n]!==""&&e(new E(i[n].replace(/%%/g,"%"))),i[n+1]!==void 0&&e(this.getArg(n))}getArg(t){if(t>=this.args.length)throw new Error("No more args man. sry...");const e=this.args[t];return e instanceof Ke?e:e===null?Vt.NULL_ARGUMENT:new E(e.toString())}visitStyleSelf(t,e){this.updateTranslations();for(const i of this.translations){const n=i.visitStyle(t,e);if(!!n.isPresent())return n}return b.empty()}visitSelf(t){this.updateTranslations();for(const e of this.translations){const i=e.visit(t);if(!!i.isPresent())return i}return b.empty()}[Symbol.toString()](){return"TranslatableComponent{key='"+this.key+"', args="+this.args.map(t=>t.toString())+", siblings="+this.siblings+", style="+this.getStyle()+"}"}getKey(){return this.key}getArgs(){return this.args}};let d=Vt;s(d,"LITERAL_PERCENT_SIGN",X.plain("%")),s(d,"NULL_ARGUMENT",X.plain("null"));const J=class{constructor(t,e){s(this,"id");s(this,"name");J.ALL_VALUES.push(this),this.id=t,this.name=new d(e)}getId(){return this.id}getName(){return this.name}static byId(t){return J.ALL_VALUES[P.mod(t,J.ALL_VALUES.length)]}static values(){return J.ALL_VALUES}};let rt=J;s(rt,"ALL_VALUES",[]),s(rt,"OFF",new J(0,"options.narrator.off")),s(rt,"ALL",new J(1,"options.narrator.all")),s(rt,"CHAT",new J(2,"options.narrator.chat")),s(rt,"SYSTEM",new J(3,"options.narrator.system"));const nt=class{constructor(t,e){s(this,"id");s(this,"translationKey");nt.ALL_VALUES.push(this),this.id=t,this.translationKey=e}getTranslationKey(){return this.translationKey}getId(){return this.id}static byId(t){return nt.ALL_VALUES[P.mod(t,nt.ALL_VALUES.length)]}static values(){return nt.ALL_VALUES}};let dt=nt;s(dt,"ALL_VALUES",[]),s(dt,"ALL",new nt(0,"options.particles.all")),s(dt,"DECREASED",new nt(1,"options.particles.decreased")),s(dt,"MINIMAL",new nt(2,"options.particles.minimal"));const q=class{constructor(t,e){s(this,"firstPerson");s(this,"frontView");q.ALL_VALUES.push(this),this.firstPerson=t,this.frontView=e}static ordinal(){return++this.index,this.index}isFirstPerson(){return this.firstPerson}isFrontView(){return this.frontView}next(){return q.ALL_VALUES[(q.ordinal()+1)%q.ALL_VALUES.length]}static values(){return q.ALL_VALUES}};let ft=q;s(ft,"index",-1),s(ft,"ALL_VALUES",[]),s(ft,"FIRST_PERSON",new q(!0,!1)),s(ft,"THIRD_PERSON_BACK",new q(!1,!1)),s(ft,"THIRD_PERSON_FRONT",new q(!1,!0));const U=class{constructor(t){s(this,"name");U.ALL_VALUES.push(this),this.name=t}getName(){return this.name}static values(){return U.ALL_VALUES}};let B=U;s(B,"ALL_VALUES",[]),s(B,"MASTER",new U("master")),s(B,"MUSIC",new U("music")),s(B,"RECORDS",new U("record")),s(B,"WEATHER",new U("weather")),s(B,"BLOCKS",new U("block")),s(B,"HOSTILE",new U("hostile")),s(B,"NEUTRAL",new U("neutral")),s(B,"PLAYERS",new U("player")),s(B,"AMBIENT",new U("ambient")),s(B,"VOICE",new U("voice"));class Bt{constructor(t){s(this,"mc");s(this,"monochromeLogo");s(this,"hideLightningFlashes");s(this,"mouseSensitivity");s(this,"viewDistance");s(this,"simulationDistance");s(this,"entityDistanceScaling");s(this,"maxFps");s(this,"cloudRenderMode");s(this,"graphicsMode");s(this,"ao");s(this,"chatVisibility");s(this,"chatOpacity");s(this,"chatLineSpacing");s(this,"textBackgroundOpacity");s(this,"hideServerAddress");s(this,"advancedItemTooltips");s(this,"pauseOnLostFocus");s(this,"overrideWidth");s(this,"overrideHeight");s(this,"heldItemTooltips");s(this,"chatScale");s(this,"chatWidth");s(this,"chatHeightUnfocused");s(this,"chatHeightFocused");s(this,"chatDelay");s(this,"mipmapLevels");s(this,"soundVolumeLevels");s(this,"attackIndicator");s(this,"biomeBlendRadius");s(this,"mouseWheelSensitivity");s(this,"rawMouseInput");s(this,"autoJump");s(this,"autoSuggestions");s(this,"chatColors");s(this,"chatLinks");s(this,"chatLinksPrompt");s(this,"enableVsync");s(this,"entityShadows");s(this,"forceUnicodeFont");s(this,"invertYMouse");s(this,"discreteMouseScroll");s(this,"realmsNotifications");s(this,"allowServerListing");s(this,"reducedDebugInfo");s(this,"showSubtitles");s(this,"backgroundForChatOnly");s(this,"touchscreen");s(this,"fullscreen");s(this,"bobView");s(this,"sneakToggled");s(this,"sprintToggled");s(this,"skipMultiplayerWarning");s(this,"hideMatchedNames");s(this,"showAutosaveIndicator");s(this,"hudHidden");s(this,"perspective");s(this,"debugEnabled");s(this,"smoothCameraEnabled");s(this,"fov");s(this,"distortionEffectScale");s(this,"fovEffectScale");s(this,"gamma");s(this,"guiScale");s(this,"particles");s(this,"narrator");s(this,"language");s(this,"requestSave");this.mc=t,this.requestSave=!1,this.monochromeLogo=!0,this.hideLightningFlashes=!1,this.mouseSensitivity=.5,this.viewDistance=6,this.simulationDistance=6,this.entityDistanceScaling=1,this.maxFps=120,this.cloudRenderMode=Y.FANCY,this.graphicsMode=z.FANCY,this.ao=j.MAX,this.chatVisibility=lt.FULL,this.chatOpacity=1,this.chatLineSpacing=0,this.textBackgroundOpacity=.5,this.hideServerAddress=!1,this.advancedItemTooltips=!1,this.pauseOnLostFocus=!0,this.overrideWidth=0,this.overrideHeight=0,this.heldItemTooltips=!0,this.chatScale=1,this.chatWidth=1,this.chatHeightUnfocused=.44366195797920227,this.chatHeightFocused=1,this.chatDelay=0,this.mipmapLevels=4,this.attackIndicator=ct.CROSSHAIR,this.biomeBlendRadius=2,this.mouseWheelSensitivity=1,this.rawMouseInput=!0,this.autoJump=!0,this.autoSuggestions=!0,this.chatColors=!0,this.chatLinks=!0,this.chatLinksPrompt=!0,this.enableVsync=!0,this.entityShadows=!0,this.forceUnicodeFont=!1,this.invertYMouse=!1,this.discreteMouseScroll=!1,this.realmsNotifications=!0,this.allowServerListing=!0,this.reducedDebugInfo=!1,this.showSubtitles=!1,this.backgroundForChatOnly=!0,this.touchscreen=!1,this.fullscreen=!1,this.bobView=!0,this.sneakToggled=!1,this.sprintToggled=!1,this.skipMultiplayerWarning=!1,this.hideMatchedNames=!0,this.showAutosaveIndicator=!0,this.hudHidden=!1,this.perspective=ft.FIRST_PERSON,this.debugEnabled=!0,this.smoothCameraEnabled=!1,this.fov=70,this.distortionEffectScale=1,this.fovEffectScale=1,this.gamma=.5,this.guiScale=3,this.particles=dt.ALL,this.narrator=rt.OFF,this.language="en_us",this.soundVolumeLevels=B.values().map(e=>[e,1])}load(){try{let t=null;if(!(t=localStorage.getItem("optionsv2")))return;window.addEventListener("storage",i=>{var n;this.requestSave?this.requestSave=!1:i.key==="optionsv2"&&i.newValue!==null&&localStorage.setItem(i.key,(n=i.oldValue)!=null?n:"")});const e={};t.split(`
`).map(i=>i.trim()).forEach(i=>{const n=i.split(":").slice(0,2);e[n[0]]=n[1]}),this.accept(new class{constructor(){s(this,"options",e)}visitInt(i,n){const r=this.options[i];return r&&parseInt(r)||n}visitFloat(i,n){const r=this.options[i];return r&&parseFloat(r)||n}visitBoolean(i,n){const r=this.options[i];return r?r.toLowerCase()==="true":n}visitString(i,n){var r;return(r=this.options[i])!=null?r:n}visitObjectString(i,n,r,a){const h=this.options[i];return h===null&&h===void 0?n:r(h)}visitObjectInt(i,n,r,a){const h=this.options[i];return h!=null?r(parseInt(h)):n}})}catch(t){t instanceof Error&&console.log(t.message)}}save(){try{let t="";this.accept(new class{add(e,i){t+=`${e}:${i}
`}visitInt(e,i){return this.add(e,i),i}visitFloat(e,i){return this.add(e,i),i}visitBoolean(e,i){return this.add(e,i),i}visitString(e,i){return this.add(e,i),i}visitObjectString(e,i,n,r){return this.add(e,r(i)),i}visitObjectInt(e,i,n,r){return this.add(e,r(i)),i}}),this.requestSave=!0,localStorage.setItem("optionsv2",t)}catch(t){t instanceof Error&&console.log(t.message)}}accept(t){this.autoJump=t.visitBoolean("autoJump",this.autoJump),this.autoSuggestions=t.visitBoolean("autoSuggestions",this.autoSuggestions),this.chatColors=t.visitBoolean("chatColors",this.chatColors),this.chatLinks=t.visitBoolean("chatLinks",this.chatLinks),this.chatLinksPrompt=t.visitBoolean("chatLinksPrompt",this.chatLinksPrompt),this.enableVsync=t.visitBoolean("enableVsync",this.enableVsync),this.entityShadows=t.visitBoolean("entityShadows",this.entityShadows),this.forceUnicodeFont=t.visitBoolean("forceUnicodeFont",this.forceUnicodeFont),this.discreteMouseScroll=t.visitBoolean("discrete_mouse_scroll",this.discreteMouseScroll),this.invertYMouse=t.visitBoolean("invertYMouse",this.invertYMouse),this.realmsNotifications=t.visitBoolean("realmsNotifications",this.realmsNotifications),this.reducedDebugInfo=t.visitBoolean("reducedDebugInfo",this.reducedDebugInfo),this.showSubtitles=t.visitBoolean("showSubtitles",this.showSubtitles),this.touchscreen=t.visitBoolean("touchscreen",this.touchscreen),this.bobView=t.visitBoolean("bobView",this.bobView),this.sneakToggled=t.visitBoolean("toggleCrouch",this.sneakToggled),this.sprintToggled=t.visitBoolean("toggleSprint",this.sprintToggled),this.monochromeLogo=t.visitBoolean("darkMojangStudiosBackground",this.monochromeLogo),this.hideLightningFlashes=t.visitBoolean("hideLightningFlashes",this.hideLightningFlashes),this.mouseSensitivity=t.visitFloat("mouseSensitivity",this.mouseSensitivity),this.fov=t.visitFloat("fov",(this.fov-70)/40)*40+70,this.distortionEffectScale=t.visitFloat("screenEffectScale",this.distortionEffectScale),this.fovEffectScale=t.visitFloat("fovEffectScale",this.fovEffectScale),this.gamma=t.visitFloat("gamma",this.gamma),this.viewDistance=~~P.clamp(t.visitInt("renderDistance",this.viewDistance),2,16),this.simulationDistance=~~P.clamp(t.visitInt("simulationDistance",this.simulationDistance),5,16),this.entityDistanceScaling=t.visitFloat("entityDistanceScaling",this.entityDistanceScaling),this.guiScale=t.visitInt("guiScale",this.guiScale),this.particles=t.visitObjectInt("particles",this.particles,dt.byId,i=>i.getId()),this.maxFps=t.visitInt("maxFps",this.maxFps),this.graphicsMode=t.visitObjectInt("graphicsMode",this.graphicsMode,z.byId,i=>i.getId()),this.ao=t.visitObjectString("ao",this.ao,Bt.loadAo,i=>i.getId()+""),this.biomeBlendRadius=t.visitInt("biomeBlendRadius",this.biomeBlendRadius),this.cloudRenderMode=t.visitObjectString("renderClouds",this.cloudRenderMode,Bt.loadCloudRenderMode,Bt.saveCloudRenderMode),this.language=t.visitString("lang",this.language),this.chatVisibility=t.visitObjectInt("chatVisibility",this.chatVisibility,lt.byId,i=>i.getId()),this.chatOpacity=t.visitFloat("chatOpacity",this.chatOpacity),this.chatLineSpacing=t.visitFloat("chatLineSpacing",this.chatLineSpacing),this.textBackgroundOpacity=t.visitFloat("textBackgroundOpacity",this.textBackgroundOpacity),this.backgroundForChatOnly=t.visitBoolean("backgroundForChatOnly",this.backgroundForChatOnly),this.hideServerAddress=t.visitBoolean("hideServerAddress",this.hideServerAddress),this.advancedItemTooltips=t.visitBoolean("advancedItemTooltips",this.advancedItemTooltips),this.pauseOnLostFocus=t.visitBoolean("pauseOnLostFocus",this.pauseOnLostFocus),this.overrideWidth=t.visitInt("overrideWidth",this.overrideWidth),this.overrideHeight=t.visitInt("overrideHeight",this.overrideHeight),this.heldItemTooltips=t.visitBoolean("heldItemTooltips",this.heldItemTooltips),this.chatHeightFocused=t.visitFloat("chatHeightFocused",this.chatHeightFocused),this.chatDelay=t.visitFloat("chatDelay",this.chatDelay),this.chatHeightUnfocused=t.visitFloat("chatHeightUnfocused",this.chatHeightUnfocused),this.chatScale=t.visitFloat("chatScale",this.chatScale),this.chatWidth=t.visitFloat("chatWidth",this.chatWidth),this.mipmapLevels=t.visitInt("mipmapLevels",this.mipmapLevels),this.attackIndicator=t.visitObjectInt("attackIndicator",this.attackIndicator,ct.byId,i=>i.getId()),this.narrator=t.visitObjectInt("narrator",this.narrator,rt.byId,i=>i.getId()),this.mouseWheelSensitivity=t.visitFloat("mouseWheelSensitivity",this.mouseWheelSensitivity),this.rawMouseInput=t.visitBoolean("rawMouseInput",this.rawMouseInput),this.skipMultiplayerWarning=t.visitBoolean("skipMultiplayerWarning",this.skipMultiplayerWarning),this.hideMatchedNames=t.visitBoolean("hideMatchedNames",this.hideMatchedNames),this.showAutosaveIndicator=t.visitBoolean("showAutosaveIndicator",this.showAutosaveIndicator),this.allowServerListing=t.visitBoolean("allowServerListing",this.allowServerListing);let e=0;for(const[i,n]of this.soundVolumeLevels)this.soundVolumeLevels[e]=[i,t.visitFloat(`soundCategory_${i.getName()}`,n)],e++}static loadCloudRenderMode(t){switch(t){case"true":return Y.FANCY;case"fast":return Y.FAST}return Y.OFF}static saveCloudRenderMode(t){switch(t){case Y.FANCY:return"true";case Y.FAST:return"fast"}return"false"}static loadAo(t){try{return t.toLowerCase()==="true"?j.MAX:t.toLowerCase()==="false"?j.OFF:j.byId(parseInt(t))}catch{return j.MAX}}setSoundVolume(t,e){let i=this.soundVolumeLevels.findIndex(n=>n[0].getName()===t.getName());i!==-1&&(this.soundVolumeLevels[i]=[t,e])}getSoundVolume(t){var e,i;return(i=(e=this.soundVolumeLevels.find(n=>n[0].getName()===t.getName()))==null?void 0:e[1])!=null?i:1}addResourcePackProfilesToManager(t){t.setEnabledProfiles(["vanilla.zip"])}}class fi{fromJson(t){const e=new E(t.description);return new be(e,t.pack_format)}getKey(){return"pack"}}class be{constructor(t,e){s(this,"description");s(this,"packFormat");this.description=t,this.packFormat=e}getDescription(){return this.description}getPackFormat(){return this.packFormat}}s(be,"READER",new fi);class mi{constructor(t,e,i,n){s(this,"name");s(this,"packFactory");s(this,"displayName");s(this,"description");this.name=t,this.packFactory=e,this.displayName=i,this.description=n}getDisplayName(){return this.displayName}getDescription(){return this.description}createResourcePack(){return this.packFactory()}getName(){return this.name}static of(t,e,i,n){try{const r=i(),a=new be(new E("desc"),8);return n(t,new E(r.getName()),e,i,a)}catch{}return null}}class We{constructor(){s(this,"texts",[])}add(t){this.texts.push(t)}getRawCombined(){return this.texts.length<1?null:this.texts.length==1?this.texts[0]:X.concat(this.texts)}getCombined(){const t=this.getRawCombined();return t!==null?t:X.EMPTY}clear(){this.texts=[]}}class wi{constructor(t){s(this,"pos",0);s(this,"data",[]);this.data=t}next(){return this.data[this.pos++]}hasNext(){return this.data[this.pos]!==void 0}remove(){const t=this.data.slice(0,this.pos),e=this.data.slice(this.pos+1);this.data=[...t,...e]}set(t){this.data[this.pos]=t}}const Ie=class{constructor(t){s(this,"widthRetriever");Ie.this=this,this.widthRetriever=t}getWidth(t){if(typeof t=="string"||t===null){if(t==null)return 0;let e=0;return R.visitFormatted(t,D.EMPTY,(i,n,r)=>(e+=this.widthRetriever.getWidth(r,n),!0)),e}else if(t instanceof vt){let e=0;return t.accept((i,n,r)=>(e+=this.widthRetriever.getWidth(r,n),!0)),e}else{let e=0;return R.visitFormatted(t,D.EMPTY,(i,n,r)=>(e+=this.widthRetriever.getWidth(r,n),!0)),e}}getTrimmedLength(t,e,i){const n=new $t(e);return R.visitForwards(t,i,(r,a,h)=>n.accept(r,a,h)),n.getLength()}trimToWidth(t,e,i){return t.substring(0,this.getTrimmedLength(t,e,i))}trimToWidthBackwards(t,e,i){let n=0,r=t.length;return R.visitBackwards(t,i,(a,h,o)=>{const l=n+this.widthRetriever.getWidth(o,h);return n=l,l>e?!1:(r=a,!0)}),t.substring(r)}getLimitedStringLength(t,e,i){const n=new $t(e);return R.visitFormatted(t,i,(r,a,h)=>n.accept(r,a,h)),n.getLength()}getStyleAt(t,e){if(t instanceof vt){const i=new $t(e);let n=null;return t.accept((r,a,h)=>i.accept(r,a,h)?!0:(n=a,!1)),n}else{const i=new $t(e);return t.visitStyle((n,r)=>R.visitFormatted(r,n,(a,h,o)=>i.accept(a,h,o))?b.empty():b.of(n),D.EMPTY).orElse(null)}}limitString(t,e,i){return t.substring(0,this.getLimitedStringLength(t,e,i))}getEndingIndex(t,e,i){const n=new pe(e);return R.visitFormatted(t,i,(r,a,h)=>n.accept(r,a,h)),n.getEndingIndex()}static moveCursorByWords(t,e,i,n){let r=i,a=e<0,h=Math.abs(e);for(let o=0;o<h;++o){if(a){for(;n&&r>0&&(t.charAt(r-1)==" "||t.charAt(r-1)==`
`);)--r;for(;r>0&&t.charAt(r-1)!=" "&&t.charAt(r-1)!=`
`;)--r;continue}let l=t.length,u=t.indexOf(" ",r),p=t.indexOf(`
`,r);if(r=u==-1&&p==-1?-1:u!=-1&&p!=-1?Math.min(u,p):u!=-1?u:p,r==-1){r=l;continue}for(;n&&r<l&&(t.charAt(r)==" "||t.charAt(r)==`
`);)++r}return r}wrapLines(t,e,i,n){if(typeof t=="string"){const r=[];return this.wrapLines2(t,e,i,!1,(a,h,o)=>r.push(X.styled(t.substring(h,o),a))),r}else if(n===void 0){const r=[];return this.wrapLines3(t,e,i,(a,h)=>r.push(a)),r}else{const r=[];return this.wrapLines3(t,e,i,(a,h)=>r.push(h!==!1?X.concat([n,a]):a)),r}}wrapLines2(t,e,i,n,r){let a=0,h=t.length,o=i;for(;a<h;){const l=new pe(e);if(R.visitFormatted(t,o,(L,k,N)=>l.accept(L,k,N),a,i)){r(o,a,h);break}let p=l.getEndingIndex(),x=t.charAt(p),w=x==`
`||x==" "?p+1:p;r(o,a,n?w:p),a=w,o=l.getEndingStyle()}}wrapLines3(t,e,i,n){let r,a=[];t.visitStyle((p,x)=>(x.length>0&&a.push(new je(x,p)),b.empty()),i);const h=new Si(a);let o=!0,l=!1,u=!1;t:for(;o;){o=!1,r=new pe(e);for(const p of h.parts){if(!R.visitFormatted(p.literal,p.style,(w,L,k)=>r.accept(w,L,k),0,i)){let w=r.getEndingIndex(),L=r.getEndingStyle(),k=h.charAt(w),N=k==`
`,pt=N||k==" ";l=N;let Mt=h.collectLine(w,pt?1:0,L);n(Mt,u),u=!N,o=!0;continue t}r.offset(p.literal.length)}}r=h.collectRemainers(),r!=null?n(r,u):l&&n(X.EMPTY,!1)}};let jt=Ie;s(jt,"this");class $t{constructor(t){s(this,"widthLeft");s(this,"length");this.widthLeft=t,this.length=0}accept(t,e,i){return this.widthLeft-=jt.this.widthRetriever.getWidth(i,e),this.widthLeft>=0?(this.length=t+1,!0):!1}getLength(){return this.length}resetLength(){this.length=0}}class pe{constructor(t){s(this,"maxWidth");s(this,"endIndex",-1);s(this,"endStyle",D.EMPTY);s(this,"nonEmpty",!1);s(this,"totalWidth",0);s(this,"lastSpaceBreak",-1);s(this,"lastSpaceStyle",D.EMPTY);s(this,"count",0);s(this,"startOffset",0);this.maxWidth=Math.max(t,1)}accept(t,e,i){let n=t+this.startOffset;switch(i){case`
`:return this.breakLine(n,e);case" ":this.lastSpaceBreak=n,this.lastSpaceStyle=e}let r=jt.this.widthRetriever.getWidth(i,e);return this.totalWidth+=r,this.nonEmpty&&this.totalWidth>this.maxWidth?this.lastSpaceBreak!=-1?this.breakLine(this.lastSpaceBreak,this.lastSpaceStyle):this.breakLine(n,e):(this.nonEmpty=this.nonEmpty||r!==0,this.count=n+i.length,!0)}breakLine(t,e){return this.endIndex=t,this.endStyle=e,!1}hasLineBreak(){return this.endIndex!=-1}getEndingIndex(){return this.hasLineBreak()?this.endIndex:this.count}getEndingStyle(){return this.endStyle}offset(t){this.startOffset+=t}}class je extends X{constructor(t,e){super();s(this,"literal");s(this,"style");this.literal=t,this.style=e}visit(t){return t(this.literal)}visitStyle(t,e){return t(this.style.withParent(e),this.literal)}}class Si{constructor(t){s(this,"parts");s(this,"joined");this.parts=t,this.joined=t.map(e=>e.literal).join("")}charAt(t){return this.joined.charAt(t)}collectLine(t,e,i){const n=new We,r=new wi(this.parts);let a=t,h=!1;for(;r.hasNext();){let o,l=r.next(),u=l.literal,p=u.length;if(h||(a>p?(n.add(l),r.remove(),a-=p):(o=u.substring(0,a),o.length>0&&n.add(X.styled(o,l.style)),a+=e,h=!0)),!!h){if(a>p){r.remove(),a-=p;continue}if(o=u.substring(a),o.length<1){r.remove();break}r.set(new je(o,i));break}}return this.joined=this.joined.substring(t+e),n.getCombined()}collectRemainers(){let t=new We;return this.parts.forEach(t.add),this.parts=[],t.getRawCombined()}}class Ti{async setContent(t){try{await navigator.clipboard.writeText(t)}catch{}}async getContent(){try{return await navigator.clipboard.readText()}catch{return""}}}class xi{constructor(t,e){s(this,"tickDelta");s(this,"lastFrameDuration");s(this,"prevTimeMillis");s(this,"tickTime");this.tickDelta=0,this.lastFrameDuration=0,this.tickTime=1e3/t,this.prevTimeMillis=e}beginRenderTick(t){this.lastFrameDuration=(t-this.prevTimeMillis)/this.tickTime,this.prevTimeMillis=t,this.tickDelta+=this.lastFrameDuration;let e=~~this.tickDelta;return this.tickDelta-=e,e}}class Wt{static isDev(){return!1}static toMB(t){return t/1024/1024}static moveCursor(t,e,i){let n=t.length;if(i>=0)for(let r=0;e<n&&r<i;++r)e>=n||++e;else for(let r=i;e>0&&r<0;++r)--e,e<=0&&--e;return e}}s(Wt,"gameVersion");let at;class Ue{asyncLoader(t,e){return new Promise(i=>{at.file(e).async("blob").then(n=>{const r=new Image;r.src=URL.createObjectURL(n),r.onload=()=>{const a=new F(Jt.from(r));t.textures[e.replace("assets/minecraft/","minecraft:")]=a,i({data:r,texture:a})}})})}async reload(){var i;const t=y.getInstance();Object.values(t.textures).forEach(n=>{var r,a;n&&((r=Jt.removeFromCache(n.baseTexture))==null||r.destroy(),(a=F.removeFromCache(n))==null||a.destroy())}),t.loader.resources={},t.textures={};const e=await(await fetch("vanilla.zip")).arrayBuffer();at=await hi.loadAsync(e),t.vanillaZip=at,console.log(at),await new Promise(async n=>{at.file("assets/minecraft/textures/gui/title/mojangstudios.png").async("blob").then(r=>{const a=new Image;a.src=URL.createObjectURL(r),a.onload=()=>{t.textures["minecraft:textures/gui/title/mojangstudios.png"]=new F(Jt.from(a)),n()}})});for(const n of Object.values(ze)){const r=JSON.parse(await at.file(`assets/minecraft/font/${n.path}.json`).async("text")),a={};for(const h of r.providers){const o=new $(h.file),l=await this.asyncLoader(t,`assets/minecraft/textures/${o.path}`),u=l.data,p=l.texture,x=(i=h.ascent)!=null?i:7,w=p.width,L=p.height,k=w/h.chars[0].length,N=L/h.chars.length;for(let pt=0;pt<h.chars.length;pt++){let Mt=0;for(const ke of h.chars[pt])ke!==" "&&(a[ke]=new Dt(p,Mt*k,pt*N,k,N,Dt.getActualGlyphWidth(u,Mt*k,pt*N,k,N)+1,x)),Mt++}a[" "]=new Dt(p,0,0,4,N,4,x)}t.fonts.push({location:n,glyphs:a})}t.textHandler=new jt(new class{getWidth(n,r){return t.fonts.find(h=>h.location.getFullPath()===r.getFont().getFullPath()).glyphs[n].getAdvance()}})}}class _e{getTexture(t,e){return new Promise(i=>{at.file(e).async("blob").then(n=>{const r=new Image;r.src=URL.createObjectURL(n),r.onload=()=>{const a=new F(Jt.from(r));t.textures[e.replace("assets/minecraft/","minecraft:")]=a,i(a)}})})}async reload(){const t=y.getInstance(),e=[];at.folder("assets/minecraft/textures/").forEach(i=>e.push("assets/minecraft/textures/"+i));for(let i=0;i<e.length;i++)await this.getTexture(t,e[i])}}const re=class{constructor(t,e){s(this,"app");s(this,"root");s(this,"screen");s(this,"overlay");s(this,"loader");s(this,"clipboard");s(this,"inputHandler");s(this,"fps",0);s(this,"nextUpdateTime",0);s(this,"currFps",-1);s(this,"renderTickCounter",new xi(20,0));s(this,"textures");s(this,"fonts",[]);s(this,"titleGetter");s(this,"splashTextLoader");s(this,"gameOptions");s(this,"scaleFactor");s(this,"languageManager");s(this,"threeRenderer");s(this,"scene");s(this,"cameraOrtho");s(this,"heapSizeLimit",0);s(this,"totalHeapSize",0);s(this,"usedHeapSize",0);s(this,"browser",(()=>navigator.userAgent.includes("Firefox/")?`Firefox ${navigator.userAgent.match(/(?<=Firefox\/)[.0-9A-Za-z]*/g)}`:navigator.userAgent.includes("Edg/")?`Edge ${navigator.userAgent.match(/(?<=Edg\/)[.0-9A-Za-z]*/g)}`:navigator.userAgent.includes("Chrome/")?`Chrome ${navigator.userAgent.match(/(?<=Chrome\/)[.0-9A-Za-z]*/g)}`:navigator.userAgent.includes("Safari/")?`Safari ${navigator.userAgent.match(/(?<=Safari\/)[.0-9A-Za-z]*/g)}`:"")());s(this,"glvendor");s(this,"glrenderer");s(this,"textHandler");s(this,"vanillaZip");s(this,"lastTime",0);s(this,"lastId",0);re.instance=this,this.titleGetter=t,this.app=new ei({width:window.innerWidth,height:window.innerHeight,resizeTo:window,backgroundAlpha:0,preserveDrawingBuffer:!0,powerPreference:"high-performance"}),this.threeRenderer=new ii({preserveDrawingBuffer:!0});function i(r,a){const h=a.match(r);return h&&h[0]}const n=this.threeRenderer.getContext().getExtension("WEBGL_debug_renderer_info");n&&(this.glrenderer=i(/((NVIDIA|AMD|Intel)[^\d]*[^\s]+)/g,this.threeRenderer.getContext().getParameter(n.UNMASKED_RENDERER_WEBGL)),this.glvendor="("+i(/(NVIDIA|AMD|Intel)/g,this.glrenderer)+")",this.glrenderer=this.glrenderer.substring(this.glrenderer.indexOf(",")+1).trim()),this.threeRenderer.setPixelRatio(window.devicePixelRatio||1),this.threeRenderer.setSize(window.innerWidth,window.innerHeight),this.scene=new si,this.cameraOrtho=new ni(85,window.innerWidth/window.innerHeight,.05,1e3),this.gameOptions=new Bt(this),this.gameOptions.load(),this.scaleFactor=this.calculateScaleFactor(this.gameOptions.guiScale),this.loader=new ri,this.textures={},this.languageManager=new qt(this.gameOptions.language),this.clipboard=new Ti,this.root=new tt,this.screen=null,this.overlay=null,this.inputHandler=new Z(this),this.inputHandler.setup(),this.splashTextLoader=new me,document.querySelector("link[rel~='icon']").href="./icon_32x32.png",this.setOverlay(new At(this,new Ne([new Ue,new _e,this.languageManager,this.splashTextLoader,...e]))),setTimeout(()=>this.setScreen(this.titleGetter()),1)}reloadResources(){this.setOverlay(new At(this,new Ne([new Ue,new _e,this.languageManager,this.splashTextLoader])))}static createResourcePackProfile(t,e,i,n,r){r.getPackFormat();const a=n;return new mi(t,a,e,new E(""))}async run(){Me.SCALE_MODE=ai.NEAREST,Me.ROUND_PIXELS=!1,this.app.stage.addChild(this.root),this.root.scale.set(this.gameOptions.guiScale),this.root.sortableChildren=!0,window.addEventListener("resize",()=>{this.windowResized()});const t=()=>{this.update(),requestAnimationFrame(t)};this.nextUpdateTime=Date.now(),requestAnimationFrame(t),document.body.appendChild(this.threeRenderer.domElement),document.body.appendChild(this.app.view)}update(){var e,i;const t=this.renderTickCounter.beginRenderTick(Date.now());for(let n=0;n<Math.min(10,t);++n)this.tick();for((e=this.overlay)==null||e.update(this.renderTickCounter.lastFrameDuration),(i=this.screen)==null||i.update(this.inputHandler.getX()/this.gameOptions.guiScale,this.inputHandler.getY()/this.gameOptions.guiScale,this.renderTickCounter.lastFrameDuration),this.threeRenderer.render(this.scene,this.cameraOrtho),performance&&performance.memory&&(this.heapSizeLimit=Wt.toMB(performance.memory.jsHeapSizeLimit),this.totalHeapSize=Wt.toMB(performance.memory.totalJSHeapSize),this.usedHeapSize=Wt.toMB(performance.memory.usedJSHeapSize)),++this.fps;Date.now()>=this.nextUpdateTime+1e3;)this.currFps=this.fps,this.nextUpdateTime+=1e3,this.fps=0}tick(){var t;(t=this.screen)==null||t.tick()}windowResized(){var e;const t=this.calculateScaleFactor(this.gameOptions.guiScale);this.scaleFactor=t,this.root.scale.set(t),this.cameraOrtho.aspect=window.innerWidth/window.innerHeight,this.cameraOrtho.updateProjectionMatrix(),this.threeRenderer.setSize(window.innerWidth,window.innerHeight),(this.overlay===null||this.overlay&&this.overlay.isFading)&&((e=this.screen)==null||e.resize(this,this.getScaledWidth(),this.getScaledHeight()))}setScreen(t){this.screen&&(this.screen.removed(),this.screen.container.parent.removeChild(this.screen.container)),this.screen=t,this.screen===null&&(this.screen=this.titleGetter()),this.screen&&(this.overlay===null&&this.screen.initScreen(this,this.getScaledWidth(),this.getScaledHeight()),this.root.addChild(this.screen.container))}setOverlay(t){this.overlay&&this.overlay.container.parent.removeChild(this.overlay.container),this.overlay=t,this.overlay&&(this.overlay.init(),this.overlay.container.zIndex=1e3,this.root.addChild(this.overlay.container))}getScaledWidth(){return window.innerWidth/this.scaleFactor}getScaledHeight(){return window.innerHeight/this.scaleFactor}getSplashTextLoader(){return this.splashTextLoader}updateGuiScale(t){this.root.scale.set(this.gameOptions.guiScale),this.windowResized()}screenshot(){const t=document.createElement("canvas"),e=t.getContext("2d");e.canvas.width=window.innerWidth,e.canvas.height=window.innerHeight,e.drawImage(this.threeRenderer.domElement,0,0),e.drawImage(this.app.view,0,0);var i=document.createElement("a");document.body.append(i);const n=new Date;i.download=`${n.getFullYear()}-${("00"+(n.getMonth()+1)).substr(-2)}-${("00"+n.getDate()).substr(-2)}_${("00"+n.getHours()).substr(-2)}.${("00"+n.getMinutes()).substr(-2)}.${("00"+n.getSeconds()).substr(-2)}${Date.now()-this.lastTime<1e3?"_"+ ++this.lastId:""}.png`,i.href=t.toDataURL("image/png"),i.click(),i.remove(),this.lastTime=Date.now()}static getInstance(){return re.instance}calculateScaleFactor(t){let e;for(e=1;e!==t&&e<window.innerWidth&&e<window.innerHeight&&window.innerWidth/(e+1)>=320&&window.innerHeight/(e+1)>=240-10;++e);return e}};let y=re;s(y,"instance");const ze={ALT:new $("minecraft:alt"),ILLAGERALT:new $("minecraft:illageralt"),DEFAULT:new $("minecraft:default")};class He{constructor(t,e,i,n,r){s(this,"guiText");s(this,"shadow");s(this,"brightnessMultiplier");s(this,"red");s(this,"green");s(this,"blue");s(this,"alpha");s(this,"x");s(this,"y");this.guiText=t,this.x=e,this.y=i,this.shadow=r,this.brightnessMultiplier=r?.25:1,this.red=(n>>16&255)/255*this.brightnessMultiplier,this.green=(n>>8&255)/255*this.brightnessMultiplier,this.blue=(n&255)/255*this.brightnessMultiplier,this.alpha=(n>>24&255)/255}accept(t,e,i){const r=y.getInstance().fonts.find(l=>l.location.equals(e.getFont()));if(!r)return!1;let a=M.getRgb(this.red*255,this.green*255,this.blue*255),h=a;e.getColor()&&(a=e.getColor().getRgb(),h=this.guiText.shadowC(a));const o=r.glyphs[i];if(i!==" "){const l=new W(o.texture);l.position.set(this.x,this.y+o.bearingY()),this.guiText.container.addChild(l),l.tint=this.shadow?h:a}return this.x+=o.getAdvance(),!0}}class Q{constructor(t,e,i,n,r,a){s(this,"container");s(this,"text");s(this,"x");s(this,"y");s(this,"color");s(this,"shadow");s(this,"fontType");this.container=new tt,this.text=e,this.fontType=t,this.x=i,this.y=n,this.color=r,this.shadow=a,this.container.position.set(this.x,this.y)}static textShadow(t,e,i,n=16777215,r=ze.DEFAULT){return new Q(r,t,e,i,n,!0).draw()}shadowC(t){const e=(t>>16&255)*.25<<16,i=(t>>8&255)*.25<<8,n=(t&255)*.25;return e|i|n}draw(){this.container.removeChildren();const t=new He(this,1,1,this.color,!0);typeof this.text=="string"?R.visitFormatted(this.text,D.EMPTY,(i,n,r)=>t.accept(i,n,r)):this.text.accept((i,n,r)=>t.accept(i,n,r));const e=new He(this,0,0,this.color,!1);return typeof this.text=="string"?R.visitFormatted(this.text,D.EMPTY,(i,n,r)=>e.accept(i,n,r)):this.text.accept((i,n,r)=>e.accept(i,n,r)),this}setText(t){return this.text=typeof t=="string"?t:t.asOrderedText(),this.draw(),this}setColor(t){return this.color=t,this.draw(),this}}class zt{createSprite(t,e,i,n,r,a,h,o,l){const u=(o!=null?o:256)/(l!=null?l:256),p=new W(new F(t,new I(n*u,r*u,a*u,h*u)));return p.position.set(e,i),p}static createSprite(t,e,i,n,r,a,h,o,l){const u=(o!=null?o:256)/(l!=null?l:256),p=new W(new F(t,new I(n*u,r*u,a*u,h*u)));return p.position.set(e,i),p}createStringWithShadow(t,e,i,n,r){return Q.textShadow(typeof t=="string"?new E(t).asOrderedText():t.asString(),e,i,n,r)}static createStringWithShadow(t,e,i,n,r){return Q.textShadow(typeof t=="string"?new E(t).asOrderedText():t.asString(),e,i,n,r)}createTextWithShadow(t,e,i,n,r){return Q.textShadow(t.asOrderedText(),e,i,n,r)}static createTextWithShadow(t,e,i,n,r){return Q.textShadow(t.asOrderedText(),e,i,n,r)}createTextWithShadow1(t,e,i,n,r){return Q.textShadow(t,e,i,n,r)}static createTextWithShadow1(t,e,i,n,r){return Q.textShadow(t,e,i,n,r)}createCenteredText(t,e,i,n,r){const a=y.getInstance();return Q.textShadow(typeof t=="string"?t:t.asOrderedText(),e-a.textHandler.getWidth(t)/2,i,n,r)}}class S extends zt{constructor(t=E.EMPTY){super();s(this,"container",new tt);s(this,"widgets",[]);s(this,"initialized",!1);s(this,"width",0);s(this,"height",0);s(this,"mc",y.getInstance());s(this,"title");s(this,"focused",null);s(this,"dragging",!1);this.title=typeof t=="string"?new E(t):t}initScreen(t,e,i){this.mc=t,this.width=e,this.height=i,this.container.removeChildren(),this.widgets=[],this.setFocused(null),this.init(),this.initialized=!0}resize(t,e,i){this.initScreen(t,e,i)}init(){}isDragging(){return this.dragging}setDragging(t){this.dragging=t}getFocused(){return this.focused}setFocused(t){this.focused=t}focusOn(t){this.setFocused(t)}hoveredElement(t,e){for(let i=0;i<this.widgets.length;i++)if(!!this.widgets[i].isMouseOver(t,e))return this.widgets[i]}changeFocus(t){let e=!1;const i=this.getFocused();if(e=i!==null,e&&i&&i.changeFocus(t))return!0;let n=this.widgets.indexOf(i),r=e&&n>=0?n+(t?1:0):t?0:this.widgets.length;if(r===this.widgets.length)return this.setFocused(null),!1;for(;r<this.widgets.length;){if(this.widgets[t?r:r-1<0?this.widgets.length-1:r-1].changeFocus(t))return this.setFocused(this.widgets[r]),!0;r=r+(t?1:-1),r<0&&(r=this.widgets.length-1),r>=this.widgets.length&&(r=0)}return this.setFocused(null),!1}mouseClicked(t,e,i){var n;for(let r=this.widgets.length-1;r>=0;r--)if(!!this.widgets[r].mouseClicked(t,e,i))return this.setFocused(this.widgets[r]),i===0&&this.setDragging(!0),!0;return(n=this.getFocused())==null||n.changeFocus(!0),this.setFocused(null),!1}mouseReleased(t,e,i){var n,r;return this.setDragging(!1),(r=(n=this.hoveredElement(t,e))==null?void 0:n.mouseReleased(t,e,i))!=null?r:!1}mouseMoved(t,e){}mouseDragged(t,e,i,n,r){return this.getFocused()!==null&&this.isDragging()&&i===0?this.getFocused().mouseDragged(t,e,i,n,r):!1}filesDragged(t){}setInitialFocus(t){this.setFocused(t)}mouseScroll(t,e,i){var n,r;return(r=(n=this.hoveredElement(t,e))==null?void 0:n.mouseScroll(t,e,i))!=null?r:!1}isMouseOver(t,e){return!1}keyPressed(t,e,i){if(e==="Escape"&&this.shouldCloseOnEsc())return this.onClose(),!0;if(e==="Tab"){let n=!S.hasShiftDown();return this.changeFocus(n)||this.changeFocus(n),!1}return this.getFocused()!==null&&this.getFocused().keyPressed(t,e,i)}keyReleased(t,e,i){return this.getFocused()!==null&&this.getFocused().keyReleased(t,e,i)}charTyped(t){return this.getFocused()!==null&&this.getFocused().charTyped(t)}tick(){}removed(){}update(t,e,i){if(!!this.initialized)for(let n=0;n<this.widgets.length;n++)this.widgets[n].update(t,e,i)}openURL(t){window.open(t,"_blank","noopener,noreferrer")}shouldCloseOnEsc(){return!0}onClose(){this.mc.setScreen(null)}addWidget(t){return this.widgets.push(t),t.init(),this.container.addChild(t.container),t}addGuiText(t){return this.container.addChild(t.container),t}addBackground(){var e;const t=(e=this.mc)==null?void 0:e.textures["minecraft:textures/gui/options_background.png"];if(t){const i=new ye(t,this.width,this.height);i.tileScale.set(2,2);const n=new K;n.beginFill(0,.78),n.drawRect(0,0,this.width,this.height),n.endFill(),this.container.addChild(i,n)}}static hasControlDown(){return Z.isKeyPressed("ControlLeft")||Z.isKeyPressed("ControlRight")}static hasShiftDown(){return Z.isKeyPressed("ShiftLeft")||Z.isKeyPressed("ShiftRight")}static hasAltDown(){return Z.isKeyPressed("AltLeft")||Z.isKeyPressed("AltRight")}static isCut(t){return t==="KeyX"&&S.hasControlDown()&&!S.hasShiftDown()&&!S.hasAltDown()}static isPaste(t){return t==="KeyV"&&S.hasControlDown()&&!S.hasShiftDown()&&!S.hasAltDown()}static isCopy(t){return t==="KeyC"&&S.hasControlDown()&&!S.hasShiftDown()&&!S.hasAltDown()}static isSelectAll(t){return(t==="KeyA"&&S.hasControlDown()||t==="ControlLeft"&&Z.isKeyPressed("KeyA"))&&!S.hasShiftDown()&&!S.hasAltDown()}}const ae=class{static onOrOff(t){return t?ae.ON:ae.OFF}static composeToggleText(t,e){return new E("").append(t).appendString(": ").append(this.onOrOff(e))}static composeGenericOptionText(t,e){return new d("options.generic_value",t,e)}};let v=ae;s(v,"ON",new d("options.on")),s(v,"OFF",new d("options.off")),s(v,"DONE",new d("gui.done")),s(v,"CANCEL",new d("gui.cancel")),s(v,"YES",new d("gui.yes")),s(v,"NO",new d("gui.no")),s(v,"PROCEED",new d("gui.proceed")),s(v,"BACK",new d("gui.back"));const ht=class extends zt{constructor(t,e,i,n,r){super();s(this,"container");s(this,"initialized");s(this,"width");s(this,"height");s(this,"x");s(this,"y");s(this,"message");s(this,"_message_Gui");s(this,"hovered");s(this,"active",!0);s(this,"visible",!0);s(this,"focused",!1);s(this,"alpha",1);this.initialized=!1,this.container=new tt,this.x=~~t,this.y=~~e,this.width=~~i,this.height=~~n,this.message=r,this.hovered=!1}init(){this.container.visible=this.visible,this.createLayout(),this.initialized=!0}createLayout(){const t=y.getInstance(),e=this.getUY(this.isHovered()),i=this.createSprite(t.textures[ht.WIDGETS_TEXTURE.getFullPath()].baseTexture,0,0,0,46+e*20,this.width/2,20),n=this.createSprite(t.textures[ht.WIDGETS_TEXTURE.getFullPath()].baseTexture,this.width/2,0,200-this.width/2,46+e*20,this.width/2,20);i.name="bgL",n.name="bgR",this._message_Gui=this.createCenteredText(this.message,this.width/2,(this.height-8)/2,this.active?ht.activeColor:ht.lockedColor),this.container.position.set(this.x,this.y),this.container.addChild(i,n),this._message_Gui&&this.container.addChild(this._message_Gui.container)}updateLayout(t){var e;if(!!this.initialized)if(t){const i=y.getInstance();(e=this._message_Gui)==null||e.container.position.set(this.width/2-i.textHandler.getWidth(this.getMessage())/2,(this.height-8)/2)}else{const i=this.getUY(this.isHovered());this.container.getChildByName("bgL").texture.frame=new I(0,46+i*20,this.width/2,20),this.container.getChildByName("bgR").texture.frame=new I(200-this.width/2,46+i*20,this.width/2,20)}}updateGuiTexts(){this._message_Gui&&this._message_Gui.setText(this.message).setColor(this.active?ht.activeColor:ht.lockedColor)}update(t,e,i){this.initialized||this.init();const n=this.isOver(t,e);this.hovered&&!n?(this.hovered=!1,this.updateLayout()):n&&!this.hovered&&(this.hovered=!0,this.updateLayout())}tick(){}onClick(t,e){}onRelease(t,e){}onDrag(t,e,i,n){}mouseClicked(t,e,i){return!this.active||!this.visible?!1:this.isValidClickButton(i)&&this.isOver(t,e)?(this.onClick(t,e),!0):!1}mouseReleased(t,e,i){return this.isValidClickButton(i)?(this.onRelease(t,e),!0):!1}mouseDragged(t,e,i,n,r){return this.isValidClickButton(i)?(this.onDrag(t,e,n,r),!0):!1}mouseMoved(t,e){}mouseScroll(t,e,i){return!1}isMouseOver(t,e){return this.isOver(t,e)}keyPressed(t,e,i){return!1}keyReleased(t,e,i){return!1}charTyped(t){return!1}isOver(t,e){return this.visible&&t>=this.x&&e>=this.y&&t<this.x+this.width&&e<this.y+this.height}isValidClickButton(t){return t===0}setMessage(t){var e;this.message=t,(e=this._message_Gui)==null||e.setText(t),this.updateLayout(!0)}getMessage(){return this.message}setWidth(t){this.width=t}getWidth(){return this.width}changeFocus(t){return!this.active||!this.visible?!1:(this.focused=!this.focused,this.onFocusedChanged(this.focused),this.updateLayout(),this.focused)}onFocusedChanged(t){}setActive(t){const e=this.active;this.active=t,e!==this.active&&(this.updateLayout(),this.updateGuiTexts())}setAlpha(t){this.alpha=t,this.container.alpha=t}isHovered(){return this.focused||this.hovered}getUY(t){return this.active?t?2:1:0}};let _=ht;s(_,"WIDGETS_TEXTURE",new $("textures/gui/widgets.png")),s(_,"activeColor",16777215),s(_,"lockedColor",10526880);class Ce extends _{constructor(t,e,i,n,r){super(t,e,i,n,r)}onClick(t,e){this.onPress()}keyPressed(t,e,i){return!this.active||!this.visible?!1:e==="Enter"||e=="Space"?(this.onPress(),!0):!1}}class m extends Ce{constructor(t,e,i,n,r,a,h){super(t,e,i,n,typeof r=="string"?new E(r):r);s(this,"onPressFunc");s(this,"tooltipSupplier");this.onPressFunc=a,this.tooltipSupplier=h}onPress(){this.onPressFunc(this)}updateLayout(t){var e;super.updateLayout(t),t||(e=this.tooltipSupplier)==null||e.onTooltip(this,this.isHovered())}}const ot=class extends _{constructor(t,e,i,n,r,a=null){super(t,e,i,n,r);s(this,"editableColor",14737632);s(this,"uneditableColor",7368816);s(this,"text","");s(this,"changedListener",null);s(this,"maxLength",32);s(this,"focusedTicks",0);s(this,"selectionStart",0);s(this,"selectionEnd",0);s(this,"firstCharacterIndex",0);s(this,"selecting",!1);s(this,"_caret");s(this,"_caret1");s(this,"suggestion",null);s(this,"a",!1);a!==null&&this.setText(a.getText())}setChangedListener(t){this.changedListener=t}tick(){++this.focusedTicks,this.focused&&Math.floor(this.focusedTicks/6)%2==0?this._caret&&(this._caret.visible=!0):this._caret&&(this._caret.visible=!1)}createLayout(){const t=new K;t.beginFill(ot.BACKGROUND_COLOR),t.drawRect(0,0,this.width,this.height),t.endFill(),t.beginFill(this.focused?ot.FOCUS_BORDER_COLOR:ot.BORDER_COLOR),t.drawRect(-1,0,this.width+2,-1),t.drawRect(-1,0,1,this.height),t.drawRect(this.width,0,1,this.height),t.drawRect(-1,this.height,this.width+2,1),t.endFill(),t.name="bg";const e=new K;e.beginFill(16777215),e.drawRect(0,0,1,8),e.endFill(),this._caret=e;let i=this.selectionStart-this.firstCharacterIndex,n=this.selectionEnd-this.firstCharacterIndex,r=y.getInstance().textHandler.trimToWidth(this.text.substring(this.firstCharacterIndex),this.getInnerWidth(),D.EMPTY);const a=i>=0&&i<=r.length,h=this.focused&&~~(this.focusedTicks/6)%2==0&&a;let o=4,l=(this.height-8)/2,u=o;n>r.length&&(n=r.length),r.length>0&&(a&&r.substring(0,i),u=y.getInstance().textHandler.getWidth(r));const p=this.selectionStart<this.text.length||this.text.length>=this.getMaxLength();let x=u;a?p&&(--x,--u):x=i>0?o+this.width:o;const w=Q.textShadow(new E("_").asString(),0,l);this._caret1=w,this._message_Gui=this.createStringWithShadow(this.text,u,l,this.active?this.editableColor:this.uneditableColor),r.length>0&&a&&i<r.length&&(this._message_Gui=this.createStringWithShadow(r.substring(i),u,l,this.active?this.editableColor:this.uneditableColor)),!p&&this.suggestion!=null,e.position.set(x,l),e.visible=h,this.container.sortableChildren=!0,e.zIndex=10,h&&(p?(e.visible=!0,w.container.visible=!1):(w.container.visible=!0,e.visible=!1)),w.container.visible=this.focused,this.container.position.set(this.x,this.y),this.container.addChild(t,e,w.container),this._message_Gui&&this.container.addChild(this._message_Gui.container);const L=new K;L.beginFill(255),L.drawRect(0,0,this.width,this.height),L.endFill(),L.blendMode=1,L.clear(),L.name="selO",this.container.addChild(L)}getMaxLength(){return this.maxLength}update(t,e,i){let n=this.selectionStart-this.firstCharacterIndex,r=this.selectionEnd-this.firstCharacterIndex;super.update(t,e,i);let a=y.getInstance().textHandler.trimToWidth(this.text.substring(this.firstCharacterIndex),this.getInnerWidth(),D.EMPTY);const h=n>=0&&n<=a.length,o=this.focused&&~~(this.focusedTicks/6)%2==0&&h;let l=4;(this.height-8)/2;let u=l;if(r>a.length&&(r=a.length),a.length>0){const w=h?a.substring(0,n):a;u=y.getInstance().textHandler.getWidth(w)}const p=this.selectionStart<this.text.length||this.text.length>=this.getMaxLength();let x=u;h?p&&(--x,--u):x=n>0?l+this.width:l,this._caret1.container.position.x=x+(this.text===""?0:l),o&&(p?(this._caret.visible=!0,this._caret1.container.visible=!1):(this._caret1.container.visible=!0,this._caret.visible=!1))}updateLayout(t){var e;if(!!this.initialized)if(t){let i=this.selectionStart-this.firstCharacterIndex,n=this.selectionEnd-this.firstCharacterIndex,r=y.getInstance().textHandler.trimToWidth(this.text.substring(this.firstCharacterIndex),this.getInnerWidth(),D.EMPTY);const a=i>=0&&i<=r.length,h=this.focused&&~~(this.focusedTicks/6)%2==0&&a;let o=4,l=(this.height-8)/2,u=o;if(n>r.length&&(n=r.length),r.length>0){const L=a?r.substring(0,i):r;u=y.getInstance().textHandler.getWidth(L)}const p=this.selectionStart<this.text.length||this.text.length>=this.getMaxLength();let x=u;a?p&&(--x,--u):x=i>0?o+this.width:o,(e=this._message_Gui)==null||e.container.position.set(o,l),this._caret&&this._message_Gui&&this._caret.position.set(x+(this.text.length<=0?0:o),l);let w=this.container.getChildByName("selO");if(n!==i){const L=o+y.getInstance().textHandler.getWidth(r.substring(0,n));w.clear(),w.beginFill(255),x>L?w.drawRect(L,l-1,x,8+2):w.drawRect(x+o,l-1,L-x-o,8+2),w.endFill()}else w.clear();h&&(p?(this._caret.visible=!0,this._caret1.container.visible=!1):(this._caret1.container.visible=!0,this._caret.visible=!1))}else{let i;(i=this.container.getChildByName("bg"))&&(i.clear(),i.beginFill(ot.BACKGROUND_COLOR),i.drawRect(0,0,this.width,this.height),i.endFill(),i.beginFill(this.focused?ot.FOCUS_BORDER_COLOR:ot.BORDER_COLOR),i.drawRect(-1,0,this.width+2,-1),i.drawRect(-1,0,1,this.height),i.drawRect(this.width,0,1,this.height),i.drawRect(-1,this.height,this.width+2,1),i.endFill(),this._caret1.container.visible=this.focused)}}updateGuiTexts(){}getSelectedText(){const t=Math.min(this.selectionStart,this.selectionEnd),e=Math.max(this.selectionStart,this.selectionEnd);return this.text.substring(t,e)}setText(t){this.text=t.length>this.maxLength?t.substring(0,this.maxLength):t,this.setSelectionEnd(this.selectionStart),this.onChanged(t)}setSelectionEnd(t){const e=this.text.length;this.selectionEnd=P.clamp(t,0,e),this.firstCharacterIndex>e&&(this.firstCharacterIndex=e);const i=this.getInnerWidth(),r=y.getInstance().textHandler.trimToWidth(this.text.substring(this.firstCharacterIndex),i,D.EMPTY).length+this.firstCharacterIndex;this.selectionEnd==this.firstCharacterIndex&&(this.firstCharacterIndex-=y.getInstance().textHandler.trimToWidthBackwards(this.text,i,D.EMPTY).length),this.selectionEnd>r?this.firstCharacterIndex+=this.selectionEnd-r:this.selectionEnd<=this.firstCharacterIndex&&(this.firstCharacterIndex-=this.firstCharacterIndex-this.selectionEnd),this.firstCharacterIndex=P.clamp(this.firstCharacterIndex,0,e),this.updateLayout(!0)}getCharacterX(t){return t>this.text.length?this.x:this.x+y.getInstance().textHandler.getWidth(this.text.substring(0,t))}moveCursor(t){this.setCursor(this.getCursorPosWithOffset(t))}getCursorPosWithOffset(t){return Wt.moveCursor(this.text,this.selectionStart,t)}setCursor(t){this.setSelectionStart(t),this.selecting||this.setSelectionEnd(this.selectionStart),this.onChanged(this.text),this.updateLayout(!0)}setSelectionStart(t){this.selectionStart=P.clamp(t,0,this.text.length)}setCursorToStart(){this.setCursor(0)}setCursorToEnd(){this.setCursor(this.text.length)}getCursor(){return this.selectionStart}getText(){return this.text}getInnerWidth(){return this.width-8}write(t){var o;let e,i,n,r=Math.min(this.selectionStart,this.selectionEnd),a=Math.max(this.selectionStart,this.selectionEnd),h=this.maxLength-this.text.length-(r-a);h<(n=(i=t).length)&&(i=i.substring(0,h),n=h),e=new Xt(this.text).replace(r,a,i).toString(),this.text=e,this.setSelectionStart(r+n),this.setSelectionEnd(this.selectionStart),(o=this._message_Gui)==null||o.setText(this.text),this.updateLayout(!0),this.onChanged(this.text)}onChanged(t){var e;this.changedListener!==null&&this.changedListener(t),(e=this._message_Gui)==null||e.setText(t),this.updateLayout(!0)}keyPressed(t,e,i){if(this.selecting=S.hasShiftDown(),S.isSelectAll(e))return this.setCursorToEnd(),this.setSelectionEnd(0),this.a=!0,!0;if(S.isCopy(e))return y.getInstance().clipboard.setContent(this.getSelectedText()),this.a=!0,!0;if(S.isPaste(e))return y.getInstance().clipboard.getContent().then(n=>{this.write(n)}),this.a=!0,!0;if(S.isCut(e))return y.getInstance().clipboard.setContent(this.getSelectedText()),this.write(""),this.a=!0,!0;switch(e){case"ArrowLeft":return S.hasControlDown()?this.setCursor(this.getWordSkipPosition(-1)):this.moveCursor(-1),!0;case"ArrowRight":return S.hasControlDown()?this.setCursor(this.getWordSkipPosition(1)):this.moveCursor(1),!0;case"Backspace":return this.selecting=!1,this.erase(-1),this.selecting=S.hasShiftDown(),!0;case"Delete":return this.selecting=!1,this.erase(1),this.selecting=S.hasShiftDown(),!0;case"Home":return this.setCursorToStart(),!0;case"End":return this.setCursorToEnd(),!0}return super.keyPressed(t,e,i)}erase(t){S.hasControlDown()?this.eraseWords(t):this.eraseCharacters(t)}eraseWords(t){if(!(this.text.length<=0)){if(this.selectionEnd!==this.selectionStart){this.write("");return}this.eraseCharacters(this.getWordSkipPosition(t)-this.selectionStart)}}getWordSkipPosition(t,e=this.getCursor(),i=!0){let n=e;const r=t<0;let a=Math.abs(t);for(let h=0;h<a;++h){if(r){for(;i&&n>0&&this.text.charAt(n-1)==" ";)--n;for(;n>0&&this.text.charAt(n-1)!=" ";)--n;continue}const o=this.text.length;if((n=this.text.indexOf(" ",n))==-1){n=o;continue}for(;i&&n<o&&this.text.charAt(n)==" ";)++n}return n}eraseCharacters(t){var a;if(this.text.length<0)return;let e=0;if(this.text.length<=0)return;if(this.selectionEnd!==this.selectionStart){this.write("");return}const i=this.getCursorPosWithOffset(t),n=Math.min(i,this.selectionStart);if(n==(e=Math.max(i,this.selectionStart)))return;const r=new Xt(this.text).delete(n,e).toString();this.text=r,this.setCursor(n),(a=this._message_Gui)==null||a.setText(this.text),this.updateLayout(!0)}charTyped(t){return this.write(t),!0}mouseClicked(t,e,i){const n=t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height;return this.setTextFieldFocused(n),n}setTextFieldFocused(t){this.focused=t,this.updateLayout()}static isValidChar(t){return!0}};let gt=ot;s(gt,"BORDER_COLOR",10526880),s(gt,"FOCUS_BORDER_COLOR",16777215),s(gt,"BACKGROUND_COLOR",0);class Ei extends S{constructor(t){super("Create New World");s(this,"prevScreen");s(this,"nameInput");s(this,"seedInput");this.prevScreen=t}tick(){var t,e;(t=this.nameInput)==null||t.tick(),(e=this.seedInput)==null||e.tick()}init(){this.addBackground(),this.addGuiText(this.createCenteredText(this.title,this.width/2,20,16777215));const t=this.height/4+24;this.nameInput=this.addWidget(new gt(this.width/2-100,t-48,200,20,E.EMPTY,this.nameInput)),this.seedInput=this.addWidget(new gt(this.width/2-100,t-24,200,20,E.EMPTY,this.seedInput)),this.addWidget(new m(this.width/2-100,t,200,20,"Flat",()=>{})).setActive(!1),this.addWidget(new m(this.width/2-100,t+24,200,20,"Void",()=>{})).setActive(!1),this.addWidget(new m(this.width/2-100,t+48,200,20,"Default (In development)",()=>{})).setActive(!1),this.addWidget(new m(this.width/2-100,t+128,200,20,v.CANCEL,()=>{this.mc.setScreen(this.prevScreen)}))}}const Gt=class extends S{constructor(t){super();s(this,"baseSpeed");s(this,"speed");s(this,"spaceKeyPressed");s(this,"mKeyPressed");s(this,"pressedCtrlKeys");s(this,"credits");s(this,"goUp",!1);s(this,"paused",!1);s(this,"centeredLines");s(this,"creditsHeight");s(this,"time");s(this,"bg");s(this,"bgOv");s(this,"vig");s(this,"guiTexts",[]);s(this,"guiTextCont",new tt);this.time=0,this.baseSpeed=t?.5:.75,this.speed=this.baseSpeed,this.spaceKeyPressed=!1,this.mKeyPressed=!1,this.creditsHeight=1/0,this.pressedCtrlKeys=new Set}getSpeed(){return this.spaceKeyPressed&&this.mKeyPressed?this.baseSpeed*(20+this.pressedCtrlKeys.size*15):this.spaceKeyPressed?this.baseSpeed*(5+this.pressedCtrlKeys.size*15):this.baseSpeed}init(){this.addBackground(),this.addVignette(),this.credits===void 0?(this.credits=[],this.centeredLines=new Set,this.load("texts/credits.json").then(a=>{var h,o;this.readCredits(a),this.creditsHeight=((o=(h=this.credits)==null?void 0:h.length)!=null?o:0)*12,this.createCreditTexts()})):(this.guiTexts=[],this.guiTextCont.removeChildren(),this.createCreditTexts());const t=new tt;t.name="title";const e=this.width/2-137,i=this.height+50,n=this.mc.textures["minecraft:textures/gui/title/minecraft.png"].baseTexture;t.addChild(...Ee(e,i,(a,h)=>{const o=new W(new F(n,new I(0,0,155,44))),l=new W(new F(n,new I(0,45,155,44)));return o.position.set(a,h),l.position.set(a+155,h),[o,l]}));const r=new W(new F(this.mc.textures["minecraft:textures/gui/title/edition.png"].baseTexture,new I(0,0,148,14)));r.position.set(e+88-25,i+37),t.addChild(r),this.container.addChild(t),this.container.addChild(this.guiTextCont)}createCreditTexts(){if(!this.credits)return;let t=this.width/2-137,i=this.height+50+100;for(let n=0;n<this.credits.length;n++){const r=this.createTextWithShadow(this.credits[n],t,i,16777215);this.guiTexts.push(r),this.guiTextCont.addChild(r.container),i+=12}}update(t,e,i){var r;this.time+=this.paused?0:i*this.speed*(this.goUp?-1:1);const n=-this.time;super.update(t,e,i);for(let a=0;a<this.guiTexts.length;a++)this.guiTexts[a].container.y=this.guiTexts[a].y+n,this.guiTexts[a].container.y<-20||this.guiTexts[a].container.y>this.height+30?(this.guiTexts[a].container.visible=!1,this.guiTexts[a].container.renderable=!1):(this.guiTexts[a].container.renderable=!0,this.guiTexts[a].container.visible=!0);this.container.getChildByName("title").y=n,(r=this.bg)==null||r.tilePosition.set(0,n*.5)}async load(t){return await this.mc.vanillaZip.file(`assets/minecraft/${t}`).async("text")}readCredits(t){const e=JSON.parse(t);for(const i of e){this.addText(Gt.SEPARATOR_LINE,!0),this.addText(new E(i.section).formatted(f.YELLOW),!0),this.addText(Gt.SEPARATOR_LINE,!0),this.addEmptyLine(),this.addEmptyLine();for(const n of i.titles){this.addText(new E(n.title).formatted(f.GRAY));for(const r of n.names)this.addText(new E(Gt.CENTERED_LINE_PREFIX+r).formatted(f.WHITE));this.addEmptyLine(),this.addEmptyLine()}}}addText(t,e){var i,n,r,a;e&&((r=this.centeredLines)==null||r.add((n=(i=this.credits)==null?void 0:i.length)!=null?n:0)),(a=this.credits)==null||a.push(typeof t=="string"?new E(t):t)}addEmptyLine(){var t;(t=this.credits)==null||t.push(E.EMPTY)}keyPressed(t,e,i){return e==="KeyP"&&S.hasControlDown()&&S.hasAltDown()?this.paused=!0:e==="ControlLeft"||e==="ControlRight"?this.pressedCtrlKeys.add(e):e==="Space"?this.spaceKeyPressed=!0:e==="KeyM"&&(this.mKeyPressed=!0),e==="KeyB"&&S.hasControlDown()&&(this.goUp=!0),this.speed=this.getSpeed(),super.keyPressed(t,e,i)}keyReleased(t,e,i){return e==="KeyP"&&S.hasControlDown()&&S.hasAltDown()?this.paused=!1:e==="Space"?this.spaceKeyPressed=!1:e==="ControlLeft"||e==="ControlRight"?this.pressedCtrlKeys.delete(e):e==="KeyM"&&(this.mKeyPressed=!1),e==="KeyB"&&S.hasControlDown()&&S.hasAltDown()&&(this.goUp=!1),this.speed=this.getSpeed(),super.keyReleased(t,e,i)}addBackground(){var e;const t=(e=this.mc)==null?void 0:e.textures["minecraft:textures/gui/options_background.png"];t&&(this.bg=new ye(t,this.width,this.height),this.bg.tileScale.set(3,3),this.bgOv=new K,this.bgOv.beginFill(0,.82),this.bgOv.drawRect(0,0,this.width,this.height),this.bgOv.endFill(),this.container.addChild(this.bg,this.bgOv))}addVignette(){var e;const t=(e=this.mc)==null?void 0:e.textures["minecraft:textures/misc/vignette.png"];if(t){this.container.sortableChildren=!0,this.vig=new oi(t,128,128,128,128),this.vig.width=this.width,this.vig.height=this.height;const i=new ci.ColorMatrixFilter;i.negative(!0),i.blendMode=2,this.vig.zIndex=10,this.vig.filters=[i],this.container.addChild(this.vig)}}tick(){let t=this.creditsHeight+this.height+this.height+24;this.time>t&&this.mc.setScreen(null)}};let Zt=Gt;s(Zt,"SEPARATOR_LINE",new E("============").formatted(f.WHITE)),s(Zt,"CENTERED_LINE_PREFIX","           ");const he=class extends S{constructor(t,e){super(new d("addServer.title"));s(this,"addButton");s(this,"callback");s(this,"addressField");s(this,"serverNameField");s(this,"prevScreen");this.prevScreen=t,this.callback=e}onClose(){this.mc.setScreen(this.prevScreen)}init(){this.addBackground(),this.addGuiText(this.createCenteredText(this.title,this.width/2,17,16777215)),this.addGuiText(this.createTextWithShadow(he.ENTER_NAME_TEXT,this.width/2-100,53,10526880)),this.addGuiText(this.createTextWithShadow(he.ENTER_IP_TEXT,this.width/2-100,94,10526880)),this.serverNameField=new gt(this.width/2-100,66,200,20,new d("addServer.enterName")),this.serverNameField.setTextFieldFocused(!0),this.serverNameField.setChangedListener(t=>this.updateAddButton()),this.addWidget(this.serverNameField),this.addressField=new gt(this.width/2-100,106,200,20,new d("addServer.enterIp")),this.addressField.setChangedListener(t=>this.updateAddButton()),this.addWidget(this.addressField),this.addButton=this.addWidget(new m(this.width/2-100,this.height/4+96+18,200,20,new d("addServer.add"),t=>this.addAndClose())),this.addWidget(new m(this.width/2-100,this.height/4+120+18,200,20,v.CANCEL,t=>this.callback(!1))),this.updateAddButton(),this.setInitialFocus(this.serverNameField)}resize(t,e,i){const n=this.addressField.getText(),r=this.serverNameField.getText();this.initScreen(t,e,i),this.addressField.setText(n),this.serverNameField.setText(r)}addAndClose(){this.callback(!0)}updateAddButton(){var t;(t=this.addButton)==null||t.setActive(this.serverNameField.getText().length>0)}tick(){var t,e;(t=this.serverNameField)==null||t.tick(),(e=this.addressField)==null||e.tick()}};let Qt=he;s(Qt,"ENTER_NAME_TEXT",new d("addServer.enterName")),s(Qt,"ENTER_IP_TEXT",new d("addServer.enterIp"));const oe=class{constructor(t,e,i,n,r,a){s(this,"container",new tt);s(this,"mc");s(this,"width");s(this,"height");s(this,"top");s(this,"bottom");s(this,"right");s(this,"left");s(this,"headerHeight",0);s(this,"scrollAmount");s(this,"scrolling");s(this,"itemHeight");s(this,"centerListVertically");s(this,"renderSelection",!0);s(this,"children",[]);s(this,"focused",null);s(this,"dragging",!1);s(this,"selected",null);s(this,"_scrollBar",new K);s(this,"_tileBg");this.mc=t,this.width=e,this.height=i,this.top=n,this.bottom=r,this.itemHeight=a,this.left=0,this.right=e,this.scrollAmount=-1,this.scrolling=!1,this.centerListVertically=!0,this.container.sortableChildren=!0}init(){this._tileBg=this.addBackground(),this._scrollBar.zIndex=20;const t=new K;t.beginFill(16777215),t.drawRect(this.left,this.top,this.right-this.left,this.bottom-this.top),t.endFill(),this.container.mask=t,this.container.addChild(t);const e=new K;e.name="selb",this.container.addChild(e);const i=new W(oe.shadowTxrs[0]),n=new W(oe.shadowTxrs[1]);i.scale.set(this.right-this.left,1),i.zIndex=20,n.zIndex=20,n.scale.set(this.right-this.left,1),i.position.set(this.left,this.top),n.position.set(this.left,this.bottom-3),this.container.addChild(i,n,this._scrollBar)}addBackground(){const t=this.mc.textures.background,e=new ye(t,this.right-this.left,this.bottom-this.top);e.tileScale.set(2,2);const i=new K;return i.beginFill(0,.9),i.drawRect(0,0,this.right-this.left,this.bottom-this.top),i.endFill(),i.position.set(this.left,this.top),e.position.set(this.left,this.top),this.container.addChild(e,i),e}addEntry(t){return this.children.push(t),t.init(),t.container.zIndex=4,this.container.addChild(t.container),this.children.length-1}getEntry(t){return this.children[t]}getEntryCount(){return this.children.length}getRowWidth(){return 220}getRowLeft(){return this.left+this.width/2-this.getRowWidth()/2+2}getRowRight(){return this.getRowLeft()+this.getRowWidth()}getRowTop(t){return this.top+4-~~this.getScrollAmount()+t*this.itemHeight+this.headerHeight}getRowBottom(t){return this.getRowTop(t)+this.itemHeight}getScrollbarPositionX(){return this.width/2+124}getScrollAmount(){return this.scrollAmount}setScrollAmount(t){this.scrollAmount=P.clamp(t,0,this.getMaxScroll())}getMaxPosition(){return this.getEntryCount()*this.itemHeight+this.headerHeight}getMaxScroll(){return Math.max(0,this.getMaxPosition()-(this.bottom-this.top-4))}mouseMoved(t,e){}isDragging(){return this.dragging}setDragging(t){this.dragging=t}setFocused(t){this.focused=t}getFocused(){return this.focused}hoveredElement(t,e){for(let i=0;i<this.children.length;i++)if(!!this.children[i].isMouseOver(t,e))return this.children[i]}mouseReleased(t,e,i){var n,r;return this.setDragging(!1),(r=(n=this.hoveredElement(t,e))==null?void 0:n.mouseReleased(t,e,i))!=null?r:!1}updateScrollingState(t,e,i){this.scrolling=i==0&&t>=this.getScrollbarPositionX()&&t<this.getScrollbarPositionX()+6}getEntryAtPosition(t,e){var l;const i=~~(this.getRowWidth()/2),n=~~(this.left+this.width/2),r=~~(n-i),a=~~(n+i),h=~~(Math.floor(e-this.top)-this.headerHeight+~~this.getScrollAmount()-4),o=~~(h/this.itemHeight);return t<this.getScrollbarPositionX()&&t>=r&&t<=a&&o>=0&&h>=0&&o<this.getEntryCount()&&(l=this.children[o])!=null?l:null}mouseClicked(t,e,i){if(this.updateScrollingState(t,e,i),!this.isMouseOver(t,e))return!1;const n=this.getEntryAtPosition(t,e);if(n!==null){if(n.mouseClicked(t,e,i))return this.setFocused(n),this.setDragging(!0),!0}else if(i==0)return!0;return this.scrolling}mouseDragged(t,e,i,n,r){if(this.getFocused()!==null&&this.isDragging()&&i===0&&this.getFocused().mouseDragged(t,e,i,n,r))return!0;if(i!==0||!this.scrolling)return!1;if(e<this.top)this.setScrollAmount(0);else if(e>this.bottom)this.setScrollAmount(this.getMaxScroll());else{const a=Math.max(1,this.getMaxScroll()),h=this.bottom-this.top,o=P.clamp(~~(h*h/this.getMaxPosition()),32,h-8),l=Math.max(1,a/(h-o));this.setScrollAmount(this.getScrollAmount()+r*l)}return!0}mouseScroll(t,e,i){return this.setScrollAmount(this.getScrollAmount()-i*this.itemHeight/2),!0}keyPressed(t,e,i){return this.getFocused()!==null&&this.getFocused().keyPressed(t,e,i)?!0:e==="ArrowDown"?(this.moveSelection(1),!0):e=="ArrowUp"?(this.moveSelection(0),!0):!1}moveSelection(t){this.moveSelectionIf(t,e=>!0)}moveSelectionIf(t,e){let i;if(i=t==0?-1:1,this.children.length>0){let n,r=this.children.indexOf(this.getSelectedOrNull());for(;r!=(n=P.clamp(r+i,0,this.getEntryCount()-1));){const a=this.children[n];if(e(a)){this.setSelected(a),this.ensureVisible(a);break}r=n}}}ensureVisible(t){let e;const i=this.getRowTop(this.children.indexOf(t)),n=i-this.top-4-this.itemHeight;n<0&&this.scroll(n),(e=this.bottom-i-this.itemHeight-this.itemHeight)<0&&this.scroll(-e)}scroll(t){this.setScrollAmount(this.getScrollAmount()+t)}keyReleased(t,e,i){return this.getFocused()!==null?this.getFocused().keyReleased(t,e,i):!1}charTyped(t){return this.getFocused()!==null?this.getFocused().charTyped(t):!1}isMouseOver(t,e){return e>=this.top&&e<=this.bottom&&t>=this.left&&t<=this.right}changeFocus(t){return!1}update(t,e,i){this.scrollAmount===-1&&(this.scrollAmount=0);const r=this.getRowLeft(),a=this.top+4-~~this.getScrollAmount();this._tileBg&&(this._tileBg.tilePosition.y=a),this.updateList(r,a,t,e,i);let h;if((h=this.getMaxScroll())>0){this._scrollBar.clear();const o=this.getScrollbarPositionX(),l=o+6;let u=~~((this.bottom-this.top)*(this.bottom-this.top)/this.getMaxPosition());u=P.clamp(u,32,this.bottom-this.top-8);let p=~~this.getScrollAmount()*(this.bottom-this.top-u)/h+this.top;p<this.top&&(p=this.top),this._scrollBar.beginFill(0),this._scrollBar.drawRect(o,this.top+(p-this.top),l-o,this.bottom-this.top),this._scrollBar.endFill(),this._scrollBar.beginFill(M.getRgb(192,192,192)),this._scrollBar.drawRect(o,this.top+(p-this.top),l-o,u),this._scrollBar.endFill(),this._scrollBar.beginFill(M.getRgb(128,128,128)),this._scrollBar.drawRect(l-1,this.top+(p-this.top),1,u),this._scrollBar.drawRect(o,this.top+(p-this.top)+u-1,l-o,1),this._scrollBar.endFill()}else this._scrollBar.clear()}centerScrollOn(t){this.setScrollAmount(this.children.indexOf(t)*this.itemHeight+this.itemHeight/2-(this.bottom-this.top)/2)}getSelectedOrNull(){return this.selected}setSelected(t){this.selected=t}updateList(t,e,i,n,r){const a=this.getEntryCount();for(let h=0;h<a;++h){const o=this.getEntry(h),l=this.getRowWidth(),u=this.itemHeight-4,p=this.getRowTop(h),x=this.getRowLeft(),w=this.container.getChildByName("selb"),L=e+h*this.itemHeight+this.headerHeight;if(this.renderSelection){if(this.isSelectedEntry(h)){const k=this.left+this.width/2-l/2,N=this.left+this.width/2+l/2;w.clear(),w.beginFill(M.getRgb(127.5,127.5,127.5)),w.drawRect(k,L-3,N-k,u+2),w.endFill(),w.beginFill(0),w.drawRect(k+1,L-2,N-k-2,u),w.endFill()}}else w.clear();o.update(h,p,x,l,u,i,n,!1,r)}}isSelectedEntry(t){return this.getSelectedOrNull()===this.children[t]}};let se=oe;s(se,"shadowTxrs",(()=>{const t=document.createElement("canvas"),e=t.getContext("2d");e.canvas.width=6,e.canvas.height=4;let i=e.createLinearGradient(0,0,0,4);i.addColorStop(0,"#000000"),i.addColorStop(1,"#00000000"),e.fillStyle=i,e.fillRect(0,0,6,4);const n=F.from(t),r=document.createElement("canvas"),a=r.getContext("2d"),h=a.createLinearGradient(0,0,0,4);return h.addColorStop(0,"#00000000"),h.addColorStop(1,"#000000"),a.fillStyle=h,a.fillRect(0,0,6,4),[n,F.from(r)]})());class $e{constructor(t){s(this,"initialized",!1);s(this,"container",new tt);s(this,"parentList");this.parentList=t}init(){this.initialized=!0}update(t,e,i,n,r,a,h,o,l){this.initialized||this.init()}isMouseOver(t,e){return!1}mouseMoved(t,e){}mouseClicked(t,e,i){return!1}mouseReleased(t,e,i){return!1}mouseDragged(t,e,i,n,r){return!1}mouseScroll(t,e,i){return!1}keyPressed(t,e,i){return!1}keyReleased(t,e,i){return!1}charTyped(t){return!1}changeFocus(t){return!1}}class vi extends se{constructor(t,e,i,n,r,a){super(t,e,i,n,r,a)}isSelectedEntry(t){return!1}}class yi extends $e{constructor(){super(...arguments);s(this,"focused",null);s(this,"dragging",!1)}isDragging(){return this.dragging}setDragging(t){this.dragging=t}setFocused(t){this.focused=t}getFocused(){return this.focused}mouseClicked(t,e,i){for(let n=this.children().length-1;n>=0;n--)if(!!this.children()[n].mouseClicked(t,e,i))return this.setFocused(this.children()[n]),i===0&&this.setDragging(!0),!0;return!1}hoveredElement(t,e){for(let i=0;i<this.children.length;i++)if(!!this.children()[i].isMouseOver(t,e))return this.children()[i]}mouseDragged(t,e,i,n,r){return this.getFocused()!==null&&this.isDragging()&&i===0?this.getFocused().mouseDragged(t,e,i,n,r):!1}mouseReleased(t,e,i){var n,r;return this.setDragging(!1),(r=(n=this.hoveredElement(t,e))==null?void 0:n.mouseReleased(t,e,i))!=null?r:!1}}class de extends vi{addSingleOptionEntry(t){return this.addEntry(kt.create(this,this.mc.gameOptions,this.width,t))}addOptionEntry(t,e){this.addEntry(kt.create(this,this.mc.gameOptions,this.width,t,e))}addAll(t){for(let e=0;e<t.length;e+=2)this.addOptionEntry(t[e],e<t.length-1?t[e+1]:null)}getRowWidth(){return 400}getScrollbarPositionX(){return super.getScrollbarPositionX()+32}getHoveredButton(t,e){for(const i of this.children)for(const n of i.buttons)if(!!n.isMouseOver(t,e))return n}}class kt extends yi{constructor(t,e){super(t);s(this,"optionsToButtons");s(this,"buttons");this.optionsToButtons=e,this.buttons=Array.from(e.values())}static create(t,e,i,n,r){if(r===void 0)return new kt(t,new Map([[n,n.createButton(e,i/2-155,0,310)]]));{const a=n.createButton(e,i/2-155,0,150);return r==null?new kt(t,new Map([[n,a]])):new kt(t,new Map([[n,a],[r,r.createButton(e,i/2-155+160,0,150)]]))}}init(){this.buttons.forEach(t=>{t.init(),this.container.addChild(t.container)}),super.init()}update(t,e,i,n,r,a,h,o,l){super.update(t,e,i,n,r,a,h,o,l);for(let u=0;u<this.buttons.length;u++)this.buttons[u].container.y!==e&&(this.buttons[u].y=e,this.buttons[u].container.y=e),this.buttons[u].update(a,h,l)}children(){return this.buttons}}class ue extends S{constructor(t){super(new d("multiplayer.title"));s(this,"prevScreen");s(this,"buttonEdit");s(this,"buttonJoin");s(this,"buttonDelete");this.prevScreen=t}init(){this.addBackground(),this.addWidget(new de(this.mc,this.width,this.height,32,this.height-64,36)),this.buttonJoin=this.addWidget(new m(this.width/2-154,this.height-52,100,20,new d("selectServer.select"),t=>{})),this.addWidget(new m(this.width/2-50,this.height-52,100,20,new d("selectServer.direct"),t=>{})).setActive(!1),this.addWidget(new m(this.width/2+4+50,this.height-52,100,20,new d("selectServer.add"),t=>{this.mc.setScreen(new Qt(this,()=>{this.mc.setScreen(this)}))})),this.buttonEdit=this.addWidget(new m(this.width/2-154,this.height-28,70,20,new d("selectServer.edit"),t=>{})),this.buttonDelete=this.addWidget(new m(this.width/2-74,this.height-28,70,20,new d("selectServer.delete"),t=>{})),this.addWidget(new m(this.width/2+4,this.height-28,70,20,new d("selectServer.refresh"),t=>this.refresh())),this.addWidget(new m(this.width/2+4+76,this.height-28,75,20,v.CANCEL,t=>this.mc.setScreen(this.prevScreen))),this.updateButtonActivationStates()}updateButtonActivationStates(){this.buttonJoin.setActive(!1),this.buttonEdit.setActive(!1),this.buttonDelete.setActive(!1)}refresh(){this.mc.setScreen(new ue(this.prevScreen))}}const ce=class extends Ce{constructor(t,e,i,n,r,a,h=!0){super(t,e,i,n,r);s(this,"checked");s(this,"showMessage");this.checked=a,this.showMessage=h}onPress(){this.checked=!this.checked,this.updateLayout(!1)}isChecked(){return this.checked}createLayout(){const t=y.getInstance(),e=this.createSprite(t.textures[ce.TEXTURE.getFullPath()].baseTexture,0,0,this.focused?20:0,this.checked?20:0,20,20);e.name="bg",this._message_Gui=this.createTextWithShadow(this.message,24,(this.height-8)/2,ce.TEXT_COLOR),this._message_Gui.container.visible=this.showMessage,this.container.position.set(this.x,this.y),this.container.addChild(e,this._message_Gui.container)}updateLayout(t){t||(this.container.getChildByName("bg").texture.frame=new I(this.focused?20:0,this.checked?20:0,20,20))}updateGuiTexts(){}};let te=ce;s(te,"TEXTURE",new $("textures/gui/checkbox.png")),s(te,"TEXT_COLOR",14737632);class Li{constructor(t,e){s(this,"text");s(this,"width");this.text=t,this.width=e}}const Yt=class extends S{constructor(t){super();s(this,"prevScreen");s(this,"checkbox");this.prevScreen=t}createLines(t,e){return this.mc.textHandler.wrapLines(t,e,D.EMPTY).map(i=>new Li(i,this.mc.textHandler.getWidth(i)))}init(){this.addBackground(),this.addGuiText(this.createTextWithShadow(Yt.HEADER,25,30,16777215));const t=this.createLines(Yt.MESSAGE,this.width-50);let e=70;for(const n of t)this.addGuiText(this.createTextWithShadow1(n.text,25,e,16777215)),e+=10;let i=(t.length+1)*8*2;this.addWidget(new m(this.width/2-155,100+i,150,20,v.PROCEED,n=>{var r;(r=this.checkbox)!=null&&r.isChecked()&&(this.mc.gameOptions.skipMultiplayerWarning=!0,this.mc.gameOptions.save()),this.mc.setScreen(new ue(this.prevScreen))})),this.addWidget(new m(this.width/2-155+160,100+i,150,20,v.BACK,n=>this.mc.setScreen(this.prevScreen))),this.checkbox=new te(this.width/2-155+80,76+i,150,20,Yt.CHECK_MESSAGE,!1),this.addWidget(this.checkbox)}};let Pt=Yt;s(Pt,"HEADER",new d("multiplayerWarning.header").formatted(f.BOLD)),s(Pt,"MESSAGE",new d("multiplayerWarning.message")),s(Pt,"CHECK_MESSAGE",new d("multiplayerWarning.check"));class yt extends S{constructor(t,e){super(e);s(this,"prevScreen");this.prevScreen=t}init(){this.addBackground()}onClose(){var t;(t=this.mc)==null||t.setScreen(this.prevScreen)}}class ge extends yt{constructor(t,e,i){super(t,e);s(this,"options");s(this,"buttonList");this.options=i}init(){this.addBackground(),this.addGuiText(this.createCenteredText(this.title,this.width/2,15,16777215)),this.buttonList=new de(this.mc,this.width,this.height,32,this.height-32,25),this.buttonList.addAll(this.options),this.addWidget(this.buttonList),this.initFooter()}initFooter(){this.addWidget(new m(this.width/2-100,this.height-27,200,20,v.DONE,()=>{this.mc.setScreen(this.prevScreen)}))}}class xt{static of(t,e,i){if(e&&i){const n=[...e],r=[...i];return new class extends xt{getCurrent(){return t()?r:n}getDefaults(){return n}}}else{const n=[...t];return new class extends xt{getCurrent(){return n}getDefaults(){return n}}}}}class fe{constructor(t){s(this,"initialIndex");s(this,"value");s(this,"valueToText");s(this,"tooltipFactory",t=>[]);s(this,"_values",xt.of([]));s(this,"optionTextOmitted");this.valueToText=t,this.value=null,this.initialIndex=0,this.optionTextOmitted=!1}tooltip(t){return this.tooltipFactory=t,this}values(t,e,i){return i?this._values=xt.of(t,e,i):e?this._values=xt.of(()=>!1,t,e):this._values=xt.of(t),this}initially(t){this.value=t;const e=this._values.getDefaults().indexOf(t);return e!=-1&&(this.initialIndex=e),this}omitKeyText(){return this.optionTextOmitted=!0,this}build(t,e,i,n,r,a=(h,o)=>{}){const h=this._values.getDefaults(),o=this.value!=null?this.value:h[this.initialIndex],l=this.valueToText(o),u=this.optionTextOmitted?l:v.composeGenericOptionText(r,l);return new ut(t,e,i,n,u,r,this.initialIndex,o,this._values,this.valueToText,a,this.tooltipFactory,this.optionTextOmitted)}}const Kt=class extends Ce{constructor(t,e,i,n,r,a,h,o,l,u,p,x,w){super(t,e,i,n,r);s(this,"optionText");s(this,"index");s(this,"value");s(this,"values");s(this,"valueToText");s(this,"onValueChangeCallback");s(this,"optionTextOmitted");s(this,"tooltipFactory");this.optionText=a,this.index=h,this.value=o,this.values=l,this.valueToText=u,this.onValueChangeCallback=p,this.tooltipFactory=x,this.optionTextOmitted=w}onPress(){this.cycle(1)}getOrderedTooltip(){return this.tooltipFactory(this.value)}cycle(t){const e=this.values.getCurrent();this.index=Math.floor((this.index+t)%e.length);const i=e[this.index];this.internalSetValue(i),this.onValueChangeCallback(this,i)}getValue(t){if(t!==void 0){const e=this.values.getCurrent();return e[Math.floor((this.index+t)%e.length)]}else return this.value}internalSetValue(t){const e=this.composeText(t);this.setMessage(e),this.value=t}composeText(t){return this.optionTextOmitted?this.valueToText(t):this.composeGenericOptionText(t)}composeGenericOptionText(t){return v.composeGenericOptionText(this.optionText,this.valueToText(t))}static builder(t){return new fe(t)}static onOffBuilder(t,e){return t&&e?new fe(i=>i!==!1?t:e).values(Kt.BOOLEAN_VALUES):typeof t=="boolean"?Kt.onOffBuilder().initially(t):new fe(i=>i!==!1?v.ON:v.OFF).values(Kt.BOOLEAN_VALUES)}};let ut=Kt;s(ut,"BOOLEAN_VALUES",[!0,!1]);class Je{constructor(t){s(this,"key");this.key=new d(t)}getDisplayPrefix(){return this.key}getPixelLabel(t){return new d("options.pixel_value",this.getDisplayPrefix(),t)}getPercentLabel(t){return new d("options.percent_value",this.getDisplayPrefix(),~~(t*100))}getPercentAdditionLabel(t){return new d("options.percent_add_value",this.getDisplayPrefix(),t)}getGenericLabel(t){return typeof t=="number"&&this.getGenericLabel(new E(t.toString())),new d("options.generic_value",this.getDisplayPrefix(),t)}}class T extends Je{constructor(t,e,i,n){super(t);s(this,"getter");s(this,"setter");s(this,"buttonBuilderFactory");s(this,"tooltips",()=>t=>[]);this.getter=e,this.setter=i,this.buttonBuilderFactory=n}static createFromEnum(t,e,i,n,r){return new T(t,n,r,()=>ut.builder(i).values(e))}static create(t,e,i,n){return n?T.create(t,e,i).tooltip(()=>r=>[n]):new T(t,e,i,ut.onOffBuilder)}tooltip(t){return this.tooltips=t,this}static createFromSupplier(t,e,i,n,r){return new T(t,n,r,()=>ut.builder(i).values(e()))}static createWithAlts(t,e,i,n,r,a,h){return new T(t,a,h,()=>ut.builder(r).values(n,e,i))}static createCustomBoolean(t,e,i,n,r){return new T(t,n,r,()=>ut.onOffBuilder(e,i))}createButton(t,e,i,n){const r=this.tooltips();return this.buttonBuilderFactory().initially(this.getter(t)).tooltip(r).build(e,i,n,20,this.getDisplayPrefix(),(a,h)=>{this.setter(t,this,h),t.save()})}}class bi extends _{constructor(t,e,i,n,r,a){super(t,e,i,n,typeof r=="string"?new E(r):r);s(this,"value");this.value=a}createLayout(){const t=y.getInstance(),e=this.getUY(this.isHovered()),i=this.createSprite(t.textures[_.WIDGETS_TEXTURE.getFullPath()].baseTexture,0,0,0,46+0*20,this.width/2,20),n=this.createSprite(t.textures[_.WIDGETS_TEXTURE.getFullPath()].baseTexture,this.width/2,0,200-this.width/2,46+0*20,this.width/2,20);i.name="bgL",n.name="bgR";const r=this.createSprite(t.textures[_.WIDGETS_TEXTURE.getFullPath()].baseTexture,~~(this.value*(this.width-8)),0,0,46+e*20,4,20),a=this.createSprite(t.textures[_.WIDGETS_TEXTURE.getFullPath()].baseTexture,~~(this.value*(this.width-8))+4,0,200-4,46+e*20,4,20);r.name="TbgL",a.name="TbgR",this._message_Gui=this.createCenteredText(this.message,this.width/2-t.textHandler.getWidth(this.getMessage())/2,(this.height-8)/2,this.active?_.activeColor:_.lockedColor),this.container.position.set(this.x,this.y),this.container.addChild(i,n,r,a,this._message_Gui.container)}updateLayout(t){var e;if(!!this.initialized)if(t)(e=this._message_Gui)==null||e.container.position.set(this.width/2-y.getInstance().textHandler.getWidth(this.getMessage())/2,(this.height-8)/2);else{const i=this.getUY(this.isHovered());this.container.getChildByName("bgL").texture.frame=new I(0,46+0*20,this.width/2,20),this.container.getChildByName("bgR").texture.frame=new I(200-this.width/2,46+0*20,this.width/2,20),this.container.getChildByName("TbgL").texture.frame=new I(0,46+i*20,4,20),this.container.getChildByName("TbgR").texture.frame=new I(200-4,46+i*20,4,20),this.container.getChildByName("TbgL").position.set(~~(this.value*(this.width-8)),0),this.container.getChildByName("TbgR").position.set(~~(this.value*(this.width-8))+4,0)}}onClick(t,e){this.setValueFromMouse(t)}keyPressed(t,e,i){const n=e==="ArrowLeft";if(n||e==="ArrowRight"){const r=n?-1:1;this.setValue(this.value+r/(this.width-8))}return!1}onDrag(t,e,i,n){this.setValueFromMouse(t),super.onDrag(t,e,i,n)}setValueFromMouse(t){this.setValue((t-(this.x+4))/(this.width-8))}setValue(t){const e=this.value;this.value=Math.min(1,Math.max(t,0)),e!==this.value&&this.applyValue(),this.updateMessage(),this.updateLayout()}}class qe extends bi{constructor(t,e,i,n,r,a){super(e,i,n,r,new E(""),a);s(this,"options");this.options=t}}class Ci extends qe{constructor(t,e,i,n,r,a){super(t,e,i,n,r,a.getRatio(a.get(t)));s(this,"option");this.option=a,this.updateMessage()}applyValue(){this.option.set(this.options,this.option.getValue(this.value)),this.options.save()}updateMessage(){this.setMessage(this.option.getDisplayString(this.options))}}const Ai=(g,t,e)=>t+g*(e-t);class O extends Je{constructor(t,e,i,n,r,a,h){super(t);s(this,"step");s(this,"min");s(this,"max");s(this,"getter");s(this,"setter");s(this,"displayStringGetter");this.min=e,this.max=i,this.step=n,this.getter=r,this.setter=a,this.displayStringGetter=h}createButton(t,e,i,n){return new Ci(t,e,i,n,20,this)}getRatio(t){return Math.min(1,Math.max(0,(this.adjust(t)-this.min)/(this.max-this.min)))}getValue(t){return this.adjust(Ai(Math.min(Math.max(t,0),1),this.min,this.max))}adjust(t){return this.step>0&&(t=this.step*Math.round(t/this.step)),Math.min(this.max,Math.max(t,this.min))}getMin(){return this.min}getMax(){return this.max}setMax(t){this.max=t}set(t,e){this.setter(t,e)}get(t){return this.getter(t)}getDisplayString(t){return this.displayStringGetter(t,this)}}const Tt=class{};let c=Tt;s(c,"BIOME_BLEND_RADIUS",new O("options.biomeBlendRadius",0,7,1,t=>t.biomeBlendRadius,(t,e)=>{t.biomeBlendRadius=P.clamp(e,0,7)},(t,e)=>{const n=~~e.get(t)*2+1;return e.getGenericLabel(new d("options.biomeBlendRadius."+n))})),s(c,"CHAT_HEIGHT_FOCUSED",new O("options.chat.height.focused",0,1,0,t=>t.chatHeightFocused,(t,e)=>{t.chatHeightFocused=e},(t,e)=>{const i=e.getRatio(e.get(t));return e.getPixelLabel(Math.floor(i*160+20))})),s(c,"SATURATION",new O("options.chat.height.unfocused",0,1,0,t=>t.chatHeightUnfocused,(t,e)=>{t.chatHeightUnfocused=e},(t,e)=>{const i=e.getRatio(e.get(t));return e.getPixelLabel(Math.floor(i*160+20))})),s(c,"CHAT_OPACITY",new O("options.chat.opacity",0,1,0,t=>t.chatOpacity,(t,e)=>{t.chatOpacity=e},(t,e)=>{const i=e.getRatio(e.get(t));return e.getPercentLabel(i*.9+.1)})),s(c,"CHAT_SCALE",new O("options.chat.scale",0,1,0,t=>t.chatScale,(t,e)=>{t.chatScale=e},(t,e)=>{const i=e.getRatio(e.get(t));return i===0?v.composeToggleText(e.getDisplayPrefix(),!1):e.getPercentLabel(i)})),s(c,"CHAT_WIDTH",new O("options.chat.width",0,1,0,t=>t.chatWidth,(t,e)=>{t.chatWidth=e},(t,e)=>{const i=e.getRatio(e.get(t));return e.getPixelLabel(Math.floor(i*280+40))})),s(c,"CHAT_LINE_SPACING",new O("options.chat.line_spacing",0,1,0,t=>t.chatLineSpacing,(t,e)=>{t.chatLineSpacing=e},(t,e)=>e.getPercentLabel(e.getRatio(e.get(t))))),s(c,"CHAT_DELAY_INSTANT",new O("options.chat.delay_instant",0,6,.1,t=>t.chatDelay,(t,e)=>{t.chatDelay=e},(t,e)=>{const i=e.get(t);return i<=0?new d("options.chat.delay_none"):new d("options.chat.delay",i)})),s(c,"FOV",new O("options.fov",30,110,1,t=>t.fov,(t,e)=>{t.fov=e},(t,e)=>{const i=e.get(t);return i===70?e.getGenericLabel(new d("options.fov.min")):i===e.getMax()?e.getGenericLabel(new d("options.fov.max")):e.getGenericLabel(~~i)})),s(c,"FOV_EFFECT_SCALE",new O("options.fovEffectScale",0,1,0,t=>Math.pow(t.fovEffectScale,2),(t,e)=>{t.fovEffectScale=Math.sqrt(e)},(t,e)=>{const i=e.getRatio(e.get(t));return i===0?e.getGenericLabel(v.OFF):e.getPercentLabel(i)})),s(c,"DISTORTION_EFFECT_SCALE",new O("options.screenEffectScale",0,1,0,t=>t.distortionEffectScale,(t,e)=>{t.distortionEffectScale=e},(t,e)=>{const i=e.getRatio(e.get(t));return i===0?e.getGenericLabel(v.OFF):e.getPercentLabel(i)})),s(c,"FRAMERATE_LIMIT",new O("options.framerateLimit",10,260,10,t=>t.maxFps,(t,e)=>{t.maxFps=~~e},(t,e)=>{const i=e.get(t);return i===e.getMax()?e.getGenericLabel(new d("options.framerateLimit.max")):e.getGenericLabel(new d("options.framerate",~~i))})),s(c,"GAMMA",new O("options.gamma",0,1,0,t=>t.gamma,(t,e)=>{t.gamma=e},(t,e)=>{const n=~~(e.getRatio(e.get(t))*100);return n===0?e.getGenericLabel(new d("options.gamma.min")):n===50?e.getGenericLabel(new d("options.gamma.default")):n===100?e.getGenericLabel(new d("options.gamma.max")):e.getGenericLabel(n)})),s(c,"MIPMAP_LEVELS",new O("options.mipmapLevels",0,4,1,t=>t.mipmapLevels,(t,e)=>{t.mipmapLevels=~~e},(t,e)=>{const i=e.get(t);return i===0?v.composeToggleText(e.getDisplayPrefix(),!1):e.getGenericLabel(~~i)})),s(c,"MOUSE_WHEEL_SENSITIVITY",new O("options.mouseWheelSensitivity",.01,10,.01,t=>t.mouseWheelSensitivity,(t,e)=>{t.mouseWheelSensitivity=e},(t,e)=>{const i=e.getRatio(e.get(t));return e.getGenericLabel(new E(e.getValue(i).toFixed(2)))})),s(c,"RAW_MOUSE_INPUT",T.create("options.rawMouseInput",t=>t.rawMouseInput,(t,e,i)=>{t.rawMouseInput=i})),s(c,"RENDER_DISTANCE",new O("options.renderDistance",2,16,1,t=>t.viewDistance,(t,e)=>{t.viewDistance=~~e},(t,e)=>{const i=e.get(t);return e.getGenericLabel(new d("options.chunks",~~i))})),s(c,"SIMULATION_DISTANCE",new O("options.simulationDistance",5,16,1,t=>t.simulationDistance,(t,e)=>{t.simulationDistance=~~e},(t,e)=>{const i=e.get(t);return e.getGenericLabel(new d("options.chunks",~~i))})),s(c,"ENTITY_DISTANCE_SCALING",new O("options.entityDistanceScaling",.5,5,.25,t=>t.entityDistanceScaling,(t,e)=>{t.entityDistanceScaling=e},(t,e)=>{const i=e.get(t);return e.getPercentLabel(i)})),s(c,"SENSITIVITY",new O("options.sensitivity",0,1,0,t=>t.mouseSensitivity,(t,e)=>{t.mouseSensitivity=e},(t,e)=>{const i=e.getRatio(e.get(t));return i===0?e.getGenericLabel(new d("options.sensitivity.min")):i===1?e.getGenericLabel(new d("options.sensitivity.max")):e.getPercentLabel(2*i)})),s(c,"TEXT_BACKGROUND_OPACITY",new O("options.accessibility.text_background_opacity",0,1,0,t=>t.textBackgroundOpacity,(t,e)=>{t.textBackgroundOpacity=e},(t,e)=>e.getPercentLabel(e.getRatio(e.get(t))))),s(c,"AO",T.createFromEnum("options.ao",j.values(),t=>new d(t.getTranslationKey()),t=>t.ao,(t,e,i)=>{t.ao=i})),s(c,"ATTACK_INDICATOR",T.createFromEnum("options.attackIndicator",ct.values(),t=>new d(t.getTranslationKey()),t=>t.attackIndicator,(t,e,i)=>{t.attackIndicator=i})),s(c,"VISIBILITY",T.createFromEnum("options.chat.visibility",lt.values(),t=>new d(t.getTranslationKey()),t=>t.chatVisibility,(t,e,i)=>{t.chatVisibility=i})),s(c,"GRAPHICS",T.createWithAlts("options.graphics",z.values(),Array.from(z.values()).filter(t=>t!=z.FABULOUS),()=>!1,t=>{const e=new d(t.getTranslationKey());return t===z.FABULOUS?e.formatted(f.ITALIC):e},t=>t.graphicsMode,(t,e,i)=>{t.graphicsMode=i})),s(c,"GUI_SCALE",T.createFromSupplier("options.guiScale",()=>{const t=y.getInstance().calculateScaleFactor(0);return new Array(t).fill(0).map((e,i)=>t-i).reverse()},t=>t===0?new d("options.guiScale.auto"):new E(t+""),t=>t.guiScale,(t,e,i)=>{t.guiScale=i})),s(c,"NARRATOR",T.createFromEnum("options.narrator",rt.values(),t=>window.speechSynthesis?t.getName():new d("options.narrator.notavailable"),t=>t.narrator,(t,e,i)=>{t.narrator=i})),s(c,"PARTICLES",T.createFromEnum("options.particles",dt.values(),t=>new d(t.getTranslationKey()),t=>t.particles,(t,e,i)=>{t.particles=i})),s(c,"CLOUDS",T.createFromEnum("options.renderClouds",Y.values(),t=>new d(t.getTranslationKey()),t=>t.cloudRenderMode,(t,e,i)=>{t.cloudRenderMode=i})),s(c,"TEXT_BACKGROUND",T.createCustomBoolean("options.accessibility.text_background",new d("options.accessibility.text_background.chat"),new d("options.accessibility.text_background.everywhere"),t=>t.backgroundForChatOnly,(t,e,i)=>{t.backgroundForChatOnly=i})),s(c,"AUTO_JUMP",T.create("options.autoJump",t=>t.autoJump,(t,e,i)=>{t.autoJump=i})),s(c,"AUTO_SUGGESTIONS",T.create("options.autoSuggestCommands",t=>t.autoSuggestions,(t,e,i)=>{t.autoSuggestions=i})),s(c,"CHAT_COLOR",T.create("options.chat.color",t=>t.chatColors,(t,e,i)=>{t.chatColors=i})),s(c,"HIDE_MATCHED_NAMES",T.create("options.hideMatchedNames",t=>t.hideMatchedNames,(t,e,i)=>{t.hideMatchedNames=i})),s(c,"CHAT_LINKS",T.create("options.chat.links",t=>t.chatLinks,(t,e,i)=>{t.chatLinks=i})),s(c,"CHAT_LINKS_PROMPT",T.create("options.chat.links.prompt",t=>t.chatLinksPrompt,(t,e,i)=>{t.chatLinksPrompt=i})),s(c,"DISCRETE_MOUSE_SCROLL",T.create("options.discrete_mouse_scroll",t=>t.discreteMouseScroll,(t,e,i)=>{t.discreteMouseScroll=i})),s(c,"VSYNC",T.create("options.vsync",t=>t.enableVsync,(t,e,i)=>{t.enableVsync=i})),s(c,"ENTITY_SHADOWS",T.create("options.entityShadows",t=>t.entityShadows,(t,e,i)=>{t.entityShadows=i})),s(c,"FORCE_UNICODE_FONT",T.create("options.forceUnicodeFont",t=>t.forceUnicodeFont,(t,e,i)=>{t.forceUnicodeFont=i})),s(c,"INVERT_MOUSE",T.create("options.invertMouse",t=>t.invertYMouse,(t,e,i)=>{t.invertYMouse=i})),s(c,"REALMS_NOTIFICATIONS",T.create("options.realmsNotifications",t=>t.realmsNotifications,(t,e,i)=>{t.realmsNotifications=i})),s(c,"ALLOW_SERVER_LISTING",T.create("options.allowServerListing",t=>t.allowServerListing,(t,e,i)=>{t.allowServerListing=i})),s(c,"REDUCED_DEBUG_INFO",T.create("options.reducedDebugInfo",t=>t.reducedDebugInfo,(t,e,i)=>{t.reducedDebugInfo=i})),s(c,"SUBTITLES",T.create("options.showSubtitles",t=>t.showSubtitles,(t,e,i)=>{t.showSubtitles=i})),s(c,"TOGGLE_TEXT",new d("options.key.toggle")),s(c,"HOLD_TEXT",new d("options.key.hold")),s(c,"SNEAK_TOGGLED",T.createCustomBoolean("key.sneak",Tt.TOGGLE_TEXT,Tt.HOLD_TEXT,t=>t.sneakToggled,(t,e,i)=>{t.sneakToggled=i})),s(c,"SPRINT_TOGGLED",T.createCustomBoolean("key.sprint",Tt.TOGGLE_TEXT,Tt.HOLD_TEXT,t=>t.sprintToggled,(t,e,i)=>{t.sprintToggled=i})),s(c,"TOUCHSCREEN",T.create("options.touchscreen",t=>t.touchscreen,(t,e,i)=>{t.touchscreen=i})),s(c,"FULLSCREEN",T.create("options.fullscreen",t=>t.fullscreen,(t,e,i)=>{t.fullscreen=i,document.fullscreenElement!==null&&!t.fullscreen?document.exitFullscreen():document.fullscreenElement===null&&t.fullscreen&&document.body.requestFullscreen()})),s(c,"VIEW_BOBBING",T.create("options.viewBobbing",t=>t.bobView,(t,e,i)=>{t.bobView=i})),s(c,"MONOCHROME_LOGO_TOOLTIP",new d("options.darkMojangStudiosBackground")),s(c,"MONOCHROME_LOGO",T.create("options.darkMojangStudiosBackgroundColor",t=>t.monochromeLogo,(t,e,i)=>{t.monochromeLogo=i},Tt.MONOCHROME_LOGO_TOOLTIP)),s(c,"HIDE_LIGHTNING_FLASHES",T.create("options.hideLightningFlashes",t=>t.hideLightningFlashes,(t,e,i)=>{t.hideLightningFlashes=i})),s(c,"SHOW_AUTOSAVE_INDICATOR",T.create("options.autosaveIndicator",t=>t.showAutosaveIndicator,(t,e,i)=>{t.showAutosaveIndicator=i}));const le=class extends ge{constructor(t){super(t,new d("options.accessibility.title"),le.OPTIONS);s(this,"tooltip",null)}initFooter(){this.addWidget(new m(this.width/2-155,this.height-27,150,20,new d("options.accessibility.link"),()=>{this.openURL(le.GUIDE_URL)})).setActive(!0),this.addWidget(new m(this.width/2+5,this.height-27,150,20,v.DONE,()=>{this.mc.setScreen(this.prevScreen)}))}update(t,e,i){super.update(t,e,i)}};let Ut=le;s(Ut,"GUIDE_URL","https://aka.ms/MinecraftJavaAccessibility"),s(Ut,"OPTIONS",[c.NARRATOR,c.SUBTITLES,c.TEXT_BACKGROUND_OPACITY,c.TEXT_BACKGROUND,c.CHAT_OPACITY,c.CHAT_LINE_SPACING,c.CHAT_DELAY_INSTANT,c.AUTO_JUMP,c.SNEAK_TOGGLED,c.SPRINT_TOGGLED,c.DISTORTION_EFFECT_SCALE,c.FOV_EFFECT_SCALE,c.MONOCHROME_LOGO,c.HIDE_LIGHTNING_FLASHES]);class Ze extends yt{constructor(t){super(t,new d("options.language"));s(this,"_title_Gui");s(this,"languageSelectionList")}init(){super.init(),this.languageSelectionList=new Ii(this.mc,this,this.width,this.height),this.addWidget(this.languageSelectionList),this.addWidget(c.FORCE_UNICODE_FONT.createButton(this.mc.gameOptions,this.width/2-155,this.height-38,150)),this.addWidget(new m(this.width/2-155+160,this.height-38,150,20,v.DONE,()=>{var e;const t=(e=this.languageSelectionList)==null?void 0:e.getSelectedOrNull();t!=null&&t.languageDefinition.getCode()!==this.mc.languageManager.getLanguage().getCode()&&(this.mc.languageManager.setLanguage(t.languageDefinition),this.mc.gameOptions.language=t.languageDefinition.getCode(),this.mc.reloadResources(),this.mc.gameOptions.save()),setTimeout(()=>this.mc.setScreen(this.prevScreen),0)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,16,16777215),this.container.addChild(this._title_Gui.container)}}class Ii extends se{constructor(t,e,i,n){super(t,i,n,32,n-65+4,18);s(this,"parent");this.parent=e;for(const r of t.languageManager.getAllLanguages()){const a=new Ri(this,r);this.addEntry(a),t.languageManager.getLanguage().getCode()===r.getCode()&&this.setSelected(a)}this.getSelectedOrNull()!=null&&this.centerScrollOn(this.getSelectedOrNull())}getScrollbarPositionX(){return super.getScrollbarPositionX()+20}getRowWidth(){return super.getRowWidth()+50}isFocused(){return this.parent.getFocused()==this}}class Ri extends $e{constructor(t,e){super(t);s(this,"languageDefinition");s(this,"_g");this.languageDefinition=e}init(){const t=this.languageDefinition.toString(),e=zt.createStringWithShadow(t,this.parentList.width/2-y.getInstance().textHandler.getWidth(t)/2,1,16777215);this._g=e,this.container.addChild(e.container),this.initialized=!0}update(t,e,i,n,r,a,h,o,l){super.update(t,e,i,n,r,a,h,o,l),this._g&&this._g.container.position.y!==e&&(this._g.y=e,this._g.container.y=e)}mouseClicked(t,e,i){return i===0?(this.onPressed(),!0):!1}onPressed(){this.parentList.setSelected(this)}}const Re=class extends ge{constructor(t){super(t,new d("options.chat.title"),Re.OPTIONS)}};let we=Re;s(we,"OPTIONS",[c.VISIBILITY,c.CHAT_COLOR,c.CHAT_LINKS,c.CHAT_LINKS_PROMPT,c.CHAT_OPACITY,c.TEXT_BACKGROUND_OPACITY,c.CHAT_SCALE,c.CHAT_LINE_SPACING,c.CHAT_DELAY_INSTANT,c.CHAT_WIDTH,c.CHAT_HEIGHT_FOCUSED,c.SATURATION,c.NARRATOR,c.AUTO_SUGGESTIONS,c.HIDE_MATCHED_NAMES,c.REDUCED_DEBUG_INFO]);class Oi extends yt{constructor(t){super(t,new d("controls.keybinds.title"));s(this,"resetAllButton")}init(){this.addBackground(),this.addGuiText(this.createCenteredText(this.title,this.width/2,8,16777215)),this.addWidget(new de(this.mc,this.width+45,this.height,20,this.height-32,20)),this.resetAllButton=this.addWidget(new m(this.width/2-155,this.height-29,150,20,new d("controls.resetAll"),()=>{})),this.addWidget(new m(this.width/2-155+160,this.height-29,150,20,v.DONE,()=>{this.mc.setScreen(this.prevScreen)}))}}class Fi extends yt{constructor(t){super(t,new d("options.mouse_settings.title"));s(this,"options",[c.SENSITIVITY,c.INVERT_MOUSE,c.MOUSE_WHEEL_SENSITIVITY,c.DISCRETE_MOUSE_SCROLL,c.TOUCHSCREEN,c.RAW_MOUSE_INPUT]);s(this,"buttonList")}init(){this.addBackground(),this.addGuiText(this.createCenteredText(this.title,this.width/2,15,16777215)),this.buttonList=new de(this.mc,this.width,this.height,32,this.height-32,25),this.buttonList.addAll(this.options),this.addWidget(this.buttonList),this.addWidget(new m(this.width/2-100,this.height-27,200,20,v.DONE,()=>{this.mc.gameOptions.save(),this.mc.setScreen(this.prevScreen)}))}}class Di extends yt{constructor(t){super(t,new d("controls.title"));s(this,"_title_Gui")}init(){super.init();let t=this.width/2-155,e=t+160,i=this.height/6-12;this.addWidget(new m(t,i,150,20,new d("options.mouse_settings"),n=>{this.mc.setScreen(new Fi(this))})),this.addWidget(new m(e,i,150,20,new d("controls.keybinds"),n=>{this.mc.setScreen(new Oi(this))})),this.addWidget(c.SNEAK_TOGGLED.createButton(this.mc.gameOptions,t,i+=24,150)),this.addWidget(c.SPRINT_TOGGLED.createButton(this.mc.gameOptions,e,i,150)),this.addWidget(c.AUTO_JUMP.createButton(this.mc.gameOptions,t,i+=24,150)),i+=24,this.addWidget(new m(this.width/2-100,this.height-29,200,20,v.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,15,16777215),this.container.addChild(this._title_Gui.container)}}const Oe=class extends ge{constructor(t){super(t,new d("options.online.title"),Oe.OPTIONS)}};let Se=Oe;s(Se,"OPTIONS",[c.REALMS_NOTIFICATIONS,c.ALLOW_SERVER_LISTING]);class ki extends yt{constructor(t){super(t,new d("options.skinCustomisation.title"));s(this,"_title_Gui")}init(){super.init(),this.addWidget(new m(this.width/2-100,this.height/6,200,20,v.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,20,16777215),this.container.addChild(this._title_Gui.container)}}class Ve extends qe{constructor(t,e,i,n,r){super(t.gameOptions,e,i,r,20,t.gameOptions.getSoundVolume(n));s(this,"category");this.category=n,this.updateMessage()}updateMessage(){const t=this.value===0?v.OFF:new E(~~(this.value*100)+"%");this.setMessage(new d("soundCategory."+this.category.getName()).appendString(": ").append(t))}applyValue(){this.options.setSoundVolume(this.category,this.value),this.options.save()}}class Mi extends yt{constructor(t){super(t,new d("options.sounds.title"));s(this,"_title_Gui")}init(){super.init();let t=this.height/6-12,e=0;this.addWidget(new Ve(this.mc,this.width/2-155+e%2*160,t+22*(e>>1),B.MASTER,310)),e+=2;for(const i of B.values())i!=B.MASTER&&(this.addWidget(new Ve(this.mc,this.width/2-155+e%2*160,t+22*(e>>1),i,150)),++e);e%2==1&&++e,this.addWidget(c.SUBTITLES.createButton(this.mc.gameOptions,this.width/2-75,t+22*((e+=2)>>1),150)),this.addWidget(new m(this.width/2-100,t+22*((e+=2)>>1),200,20,v.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,15,16777215),this.container.addChild(this._title_Gui.container)}}const Fe=class extends ge{constructor(t){super(t,new d("options.videoTitle"),Fe.OPTIONS)}mouseClicked(t,e,i){const n=this.mc.gameOptions.guiScale;return super.mouseClicked(t,e,i)?(this.mc.gameOptions.guiScale!==n&&this.mc.updateGuiScale(n),!0):!1}mouseReleased(t,e,i){var r;const n=this.mc.gameOptions.guiScale;return super.mouseReleased(t,e,i)?!0:(r=this.buttonList)!=null&&r.mouseReleased(t,e,i)?(this.mc.gameOptions.guiScale!==n&&this.mc.updateGuiScale(n),!0):!1}};let Te=Fe;s(Te,"OPTIONS",[c.GRAPHICS,c.RENDER_DISTANCE,c.SIMULATION_DISTANCE,c.AO,c.FRAMERATE_LIMIT,c.VSYNC,c.VIEW_BOBBING,c.GUI_SCALE,c.ATTACK_INDICATOR,c.GAMMA,c.CLOUDS,c.FULLSCREEN,c.PARTICLES,c.MIPMAP_LEVELS,c.ENTITY_SHADOWS,c.DISTORTION_EFFECT_SCALE,c.ENTITY_DISTANCE_SCALING,c.FOV_EFFECT_SCALE,c.SHOW_AUTOSAVE_INDICATOR]);class Pi extends S{constructor(t,e,i,n=v.YES,r=v.NO){super(e);s(this,"message");s(this,"yesTranslated");s(this,"noTranslated");s(this,"callback");s(this,"buttons",[]);this.callback=t,this.message=i,this.yesTranslated=n,this.noTranslated=r}init(){this.addBackground(),this.addGuiText(this.createCenteredText(this.title,this.width/2,70,16777215)),this.addGuiText(this.createCenteredText(this.message,this.width/2,90,16777215));const t=8,e=P.clamp(90+t+12,this.height/6+96,this.height-24);this.buttons=[],this.addButtons(e)}addButtons(t){this.addButton(new m(this.width/2-155,t,150,20,this.yesTranslated,e=>this.callback(!0))),this.addButton(new m(this.width/2-155+160,t,150,20,this.noTranslated,e=>this.callback(!1)))}addButton(t){this.buttons.push(this.addWidget(t))}shouldCloseOnEsc(){return!1}keyPressed(t,e,i){return e==="Escape"?(this.callback(!1),!0):super.keyPressed(t,e,i)}}const De=class extends S{constructor(t,e){super(e);s(this,"prevScreen");s(this,"doneButton");this.prevScreen=t}onClose(){this.mc.setScreen(this.prevScreen)}init(){this.addBackground(),this.addGuiText(this.createCenteredText(this.title,this.width/2,8,16777215)),this.addGuiText(this.createCenteredText(De.DROP_INFO,this.width/2,20,16777215)),this.doneButton=this.addWidget(new m(this.width/2+4,this.height-48,150,20,v.DONE,t=>this.onClose())),this.addWidget(new m(this.width/2-154,this.height-48,150,20,new d("pack.openFolder"),t=>{const e=document.createElement("input");e.type="file",e.click()}))}filesDragged(t){const e=t.map(i=>i.name).join(", ");this.mc.setScreen(new Pi(i=>{this.mc.setScreen(this)},new d("pack.dropConfirm"),new E(e)))}};let xe=De;s(xe,"DROP_INFO",new d("pack.dropInfo").formatted(f.GRAY));class Ni extends S{constructor(t){super(new d("options.title"));s(this,"prevScreen");this.prevScreen=t}init(){super.init(),this.addBackground();const t=this.width/2-155,e=this.height/6+48-6;this.addWidget(c.FOV.createButton(this.mc.gameOptions,t,this.height/6-12,150)),this.addWidget(new m(t+160,this.height/6-12,150,20,new d("options.online"),()=>{this.mc.setScreen(new Se(this))})),this.addWidget(new m(t,e,150,20,new d("options.skinCustomisation"),()=>{this.mc.setScreen(new ki(this))})),this.addWidget(new m(t+160,e,150,20,new d("options.sounds"),()=>{this.mc.setScreen(new Mi(this))})),this.addWidget(new m(t,e+24,150,20,new d("options.video"),()=>{this.mc.setScreen(new Te(this))})),this.addWidget(new m(t+160,e+24,150,20,new d("options.controls"),()=>{this.mc.setScreen(new Di(this))})),this.addWidget(new m(t,e+48,150,20,new d("options.language"),()=>{this.mc.setScreen(new Ze(this))})),this.addWidget(new m(t+160,e+48,150,20,new d("options.chat.title"),()=>{this.mc.setScreen(new we(this))})),this.addWidget(new m(t,e+72,150,20,new d("options.resourcepack"),()=>{this.mc.setScreen(new xe(this,new d("options.resourcepack")))})),this.addWidget(new m(t+160,e+72,150,20,new d("options.accessibility.title"),()=>{this.mc.setScreen(new Ut(this))})),this.addWidget(new m(t+55,e+72+48+6,200,20,v.DONE,()=>{this.mc.setScreen(this.prevScreen)}))}}class Ge extends m{constructor(t,e,i,n,r,a,h,o,l,u){super(t,e,i,n,l,u);s(this,"texture");s(this,"u");s(this,"v");s(this,"hoveredVOffset");this.texture=o,this.u=r,this.v=a,this.hoveredVOffset=h}createLayout(){const t=y.getInstance(),e=this.createSprite(t.textures[this.texture.getFullPath()].baseTexture,0,0,this.u,this.v+(this.isHovered()?this.hoveredVOffset:0),this.width,this.height);e.name="bg",this.container.position.set(this.x,this.y),this.container.addChild(e)}updateLayout(){!this.initialized||(this.container.getChildByName("bg").texture.frame=new I(this.u,this.v+(this.isHovered()?this.hoveredVOffset:0),this.width,this.height))}}function Ee(g,t,e){let i=[];return i.push(...e(g-1,t).map(n=>(n.tint=0,n))),i.push(...e(g+1,t).map(n=>(n.tint=0,n))),i.push(...e(g,t-1).map(n=>(n.tint=0,n))),i.push(...e(g,t+1).map(n=>(n.tint=0,n))),i.push(...e(g,t)),i}const Bi=new Ye(1,0,0),Wi=new Ye(0,1,0),Ft=class extends S{constructor(){super();s(this,"isMinceraft");s(this,"splashText");s(this,"copyrightTextWidth");s(this,"copyrightTextX");s(this,"copyUnderline");s(this,"splashTextScale");s(this,"_splash");s(this,"panoramaBox");s(this,"panoramaTime",0);s(this,"tooltip",null);s(this,"_de");s(this,"_de1");s(this,"_de2");s(this,"_de3");s(this,"_de4");s(this,"_de5");Ft.this=this,this.splashText="",this.splashTextScale=1,this.isMinceraft=Math.random()<1e-4,this.copyrightTextWidth=0,this.copyrightTextX=0}removed(){this.panoramaBox&&this.mc.scene.remove(this.panoramaBox)}a(t,e,i){const n=e*(i?Math.PI/180:1),r=Math.sin(n/2),a=new Pe;return a.x=t.x*r,a.y=t.y*r,a.z=t.z*r,a.w=Math.cos(n/2),a}init(){if(this.splashText===""&&(this.splashText=this.mc.getSplashTextLoader().get()),!this.panoramaBox){this.mc.cameraOrtho.updateProjectionMatrix(),this.mc.cameraOrtho.position.set(0,0,0),this.mc.cameraOrtho.rotation.set(0,0,0);const o=new li(1e3,1e3,1e3),l=new Lt(this.mc.textures["minecraft:textures/gui/title/background/panorama_0.png"].baseTexture.resource.source);l.needsUpdate=!0;const u=new Lt(this.mc.textures["minecraft:textures/gui/title/background/panorama_1.png"].baseTexture.resource.source);u.needsUpdate=!0;const p=new Lt(this.mc.textures["minecraft:textures/gui/title/background/panorama_2.png"].baseTexture.resource.source);p.needsUpdate=!0;const x=new Lt(this.mc.textures["minecraft:textures/gui/title/background/panorama_3.png"].baseTexture.resource.source);x.needsUpdate=!0;const w=new Lt(this.mc.textures["minecraft:textures/gui/title/background/panorama_4.png"].baseTexture.resource.source);w.needsUpdate=!0;const L=new Lt(this.mc.textures["minecraft:textures/gui/title/background/panorama_5.png"].baseTexture.resource.source);L.needsUpdate=!0;const k=[new bt({map:u,transparent:!0,side:Ct}),new bt({map:x,transparent:!0,side:Ct}),new bt({map:w,transparent:!0,side:Ct}),new bt({map:L,transparent:!0,side:Ct}),new bt({map:l,transparent:!0,side:Ct}),new bt({map:p,transparent:!0,side:Ct})],N=new di(o,k);this.panoramaBox=N}this.mc.scene.add(this.panoramaBox),this.copyrightTextWidth=this.mc.textHandler.getWidth(Ft.COPYRIGHT),this.copyrightTextX=this.width-this.copyrightTextWidth-2;const t=this.width/2-100,e=this.height/4+48,i=this.width/2-137,n=30,r=this.mc.textures["minecraft:textures/gui/title/minecraft.png"].baseTexture,a=new W(new F(this.mc.textures["minecraft:textures/gui/title/edition.png"].baseTexture,new I(0,0,148,14)));a.position.set(i+88-25,67),this.isMinceraft?this.container.addChild(...Ee(i,n,(o,l)=>{const u=new W(new F(r,new I(0,0,99,44))),p=new W(new F(r,new I(129,0,27,44))),x=new W(new F(r,new I(126,0,3,44))),w=new W(new F(r,new I(99,0,26,44))),L=new W(new F(r,new I(0,45,155,44)));return u.position.set(o,l),p.position.set(o+99,l),x.position.set(o+99+26,l),w.position.set(o+99+26+3,l),L.position.set(o+155,l),[u,p,x,w,L]})):this.container.addChild(...Ee(i,n,(o,l)=>{const u=new W(new F(r,new I(0,0,155,44))),p=new W(new F(r,new I(0,45,155,44)));return u.position.set(o,l),p.position.set(o+155,l),[u,p]})),this.container.addChild(a),this.addWidget(new m(t,e,200,20,new d("menu.singleplayer"),()=>{this.mc.setScreen(new Ei(this))})),this.addWidget(new m(t,e+24,200,20,new d("menu.multiplayer"),()=>{const o=this.mc.gameOptions.skipMultiplayerWarning?new ue(this):new Pt(this);this.mc.setScreen(o)})),this.addWidget(new m(t,e+48,200,20,new d("menu.online"),()=>{})).setActive(!1),this.addWidget(new Ge(t-24,e+72+12,20,20,0,106,20,_.WIDGETS_TEXTURE,new E(""),()=>{this.mc.setScreen(new Ze(this))})),this.addWidget(new m(t,e+72+12,98,20,new d("menu.options"),()=>{this.mc.setScreen(new Ni(this))})),this.addWidget(new m(t+102,e+72+12,98,20,new d("menu.quit"),()=>{})).setActive(!1),this.addWidget(new Ge(t+204,e+72+12,20,20,0,0,20,Ft.ACCESSIBILITY_ICON_TEXTURE,new E(""),()=>{this.mc.setScreen(new Ut(this))})),this.addGuiText(this.createStringWithShadow("Minecraft JS v0.0.1-a",2,this.height-10,16777215)),this.addGuiText(this.createStringWithShadow(Ft.COPYRIGHT,this.copyrightTextX,this.height-10,16777215)),this.copyUnderline=new K,this.copyUnderline.beginFill(16777215),this.copyUnderline.drawRect(0,0,this.copyrightTextWidth,1),this.copyUnderline.endFill(),this.copyUnderline.position.set(this.copyrightTextX,this.height-1),this.copyUnderline.visible=!1,this.container.addChild(this.copyUnderline);const h=1.8-Math.abs(Math.sin(Date.now()%1e3/1e3*6.2831855)*.1);this.splashTextScale=h*100/(this.mc.textHandler.getWidth(this.splashText)*1.15+32),this._splash=this.addGuiText(this.createTextWithShadow(new E(this.splashText.substring(0,Math.floor(this.splashText.length/2))).formatted(f.YELLOW).append(new E(this.splashText.substring(Math.floor(this.splashText.length/2))).formatted(f.BLUE)),this.width/2+90,62,16776960)),this._splash.container.pivot.x=this._splash.container.width/2,this._splash.container.pivot.y=this._splash.container.height/2,this._splash.container.rotation=-20*Math.PI/180,this._splash.container.scale.set(this.splashTextScale,this.splashTextScale),this._de=this.addGuiText(this.createStringWithShadow(this.mc.browser,2,2,16777215)),this._de1=this.addGuiText(this.createStringWithShadow(`Mem: ${-~(this.mc.totalHeapSize/this.mc.heapSizeLimit*100)}% ${this.mc.heapSizeLimit}MB`,2,12,16777215)),this._de2=this.addGuiText(this.createStringWithShadow(`Allocated: ${-~(this.mc.usedHeapSize/this.mc.totalHeapSize*100)}% ${this.mc.totalHeapSize.toFixed(2)}MB`,2,22,16777215)),this._de3=this.addGuiText(this.createStringWithShadow(`CPU: ${navigator.hardwareConcurrency}x`,2,32,16777215)),this._de4=this.addGuiText(this.createStringWithShadow(`Display: ${screen.availWidth}x${screen.availHeight} ${this.mc.glvendor}`,2,42,16777215)),this._de5=this.addGuiText(this.createStringWithShadow(`${this.mc.glrenderer}`,2,52,16777215))}mouseClicked(t,e,i){return super.mouseClicked(t,e,i)?!0:t>this.copyrightTextX&&t<this.copyrightTextX+this.copyrightTextWidth&&e>this.height-10&&e<this.height?(this.mc.setScreen(new Zt(!1)),!0):!1}update(t,e,i){var o,l,u;super.update(t,e,i),this.panoramaTime+=i;const n=new Pe,r=Math.sin(this.panoramaTime*.001)+5+25,a=this.panoramaTime*.1;n.multiply(this.a(Bi,r,!0)),n.multiply(this.a(Wi,a,!0)),(o=this.panoramaBox)==null||o.rotation.setFromQuaternion(n);const h=1.8-Math.abs(Math.sin(Date.now()%1e3/1e3*6.2831855)*.1);this._splash&&(this.splashTextScale=h*100/(this.mc.textHandler.getWidth(this.splashText)*1.15+32),this._splash.container.scale.set(this.splashTextScale,this.splashTextScale)),this.copyUnderline&&(this.copyUnderline.visible=t>this.copyrightTextX&&t<this.copyrightTextX+this.copyrightTextWidth&&e>this.height-10&&e<this.height),this.mc.gameOptions.debugEnabled&&h<1.71&&i*100%12===0&&((l=this._de1)==null||l.setText(`Heap: ${-~(this.mc.totalHeapSize/this.mc.heapSizeLimit*100)}% ${this.mc.heapSizeLimit}MB`),(u=this._de2)==null||u.setText(`Allocated: ${-~(this.mc.usedHeapSize/this.mc.totalHeapSize*100)}% ${this.mc.totalHeapSize.toFixed(2)}MB`)),this._de&&this._de.container.visible!==this.mc.gameOptions.debugEnabled&&(this._de.container.visible=!this._de.container.visible),this._de1&&this._de1.container.visible!==this.mc.gameOptions.debugEnabled&&(this._de1.container.visible=!this._de1.container.visible),this._de2&&this._de2.container.visible!==this.mc.gameOptions.debugEnabled&&(this._de2.container.visible=!this._de2.container.visible),this._de3&&this._de3.container.visible!==this.mc.gameOptions.debugEnabled&&(this._de3.container.visible=!this._de3.container.visible),this._de4&&this._de4.container.visible!==this.mc.gameOptions.debugEnabled&&(this._de4.container.visible=!this._de4.container.visible),this._de5&&this._de5.container.visible!==this.mc.gameOptions.debugEnabled&&(this._de5.container.visible=!this._de5.container.visible)}shouldCloseOnEsc(){return!1}};let Nt=Ft;s(Nt,"this"),s(Nt,"ACCESSIBILITY_ICON_TEXTURE",new $("textures/gui/accessibility.png")),s(Nt,"COPYRIGHT","Not Associated or Approved by Mojang!");const Ui=["localhost:3000","kalmemarq.github.io"];let ve=!0;try{console.log(window.location.host,document.location.host,window.parent.location.host),window.parent&&(ve=Ui.includes(window.parent.location.host.toLowerCase()))}catch{ve=!1}ve?new y(()=>new Nt,[]).run():window.location.href="https://www.google.com";
