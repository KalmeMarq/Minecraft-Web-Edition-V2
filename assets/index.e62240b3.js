var Z=Object.defineProperty;var tt=(d,t,e)=>t in d?Z(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var i=(d,t,e)=>(tt(d,typeof t!="symbol"?t+"":t,e),e);import{T as H,R as G,C as L,S as I,a as q,G as R,N as et,f as it,b as st,L as nt,s as rt,c as ht}from"./vendor.bb251275.js";const at=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}};at();class ct{async setClipboard(t){try{await navigator.clipboard.writeText(t)}catch{}}async getClipboard(){try{return await navigator.clipboard.readText()}catch{return""}}}const g=class{constructor(t,e,s,n,r,a,o){i(this,"image");i(this,"texture");i(this,"offsetX");i(this,"offsetY");i(this,"width");i(this,"height");i(this,"advance");i(this,"ascent");this.image=t,this.offsetX=e,this.offsetY=s,this.width=n,this.height=r,this.advance=a,this.ascent=o,this.texture=new H(this.image.baseTexture,new G(this.offsetX,this.offsetY,this.width,this.height))}static getColorAtPixel(t,e,s){const n=4*(t.width*s+e);return{r:t.data[n+0],g:t.data[n+1],b:t.data[n+2],a:t.data[n+3]}}static getActualGlyphWidth(t,e,s,n,r){(g.TEMPCTX.canvas.width!==n||g.f)&&(g.TEMPCTX.canvas.width=n),(g.TEMPCTX.canvas.height!==r||g.f)&&(g.TEMPCTX.canvas.height=r),g.TEMPCTX.drawImage(t,e,s,n,r,0,0,n,r);const a=g.TEMPCTX.getImageData(0,0,n,r);let o;for(o=n-1;o>=0;--o)for(let l=0;l<r;++l)if(g.getColorAtPixel(a,o,l).a!==0)return o+1;return o+1}getAdvance(){return this.advance}bearingY(){return 7-this.ascent-3*2+6}};let T=g;i(T,"TEMPCTX",document.createElement("canvas").getContext("2d")),i(T,"f",!0),(()=>{g.TEMPCTX.imageSmoothingEnabled=!1})();class m{constructor(t,e){i(this,"namespace");i(this,"path");if(e)this.path=e,this.namespace=t;else{const s=this.splitLocation(t);this.path=s.path,this.namespace=s.namespace}}splitLocation(t){const e=t.substring(0,t.indexOf(":"));return{namespace:e.length===0?"minecraft":e,path:t.substring(t.indexOf(":")+1,t.length)}}getFullPath(){return`${this.namespace}:${this.path}`}equals(t){return t===this?!0:t instanceof m?t.namespace===this.namespace&&t.path===this.path:!1}}const Y={ALT:new m("minecraft:alt"),ILLAGERALT:new m("minecraft:illageralt"),DEFAULT:new m("minecraft:default")};class x{constructor(t,e,s,n,r,a){i(this,"container");i(this,"text");i(this,"x");i(this,"y");i(this,"color");i(this,"shadow");i(this,"fontType");this.container=new L,this.text=e,this.fontType=t,this.x=s,this.y=n,this.color=r,this.shadow=a,this.container.position.set(this.x,this.y)}static textShadow(t,e,s,n=16777215,r=Y.DEFAULT){return new x(r,t,e,s,n,!0).draw()}shadowC(){const t=(this.color>>16&255)*.25<<16,e=(this.color>>8&255)*.25<<8,s=(this.color&255)*.25;return t|e|s}static getWidth(t,e=Y.DEFAULT){const n=p.getInstance().fonts.find(a=>a.location.equals(e));if(!n)return 0;let r=0;for(const a of t)r+=n.glyphs[a].getAdvance();return r}draw(){const e=p.getInstance().fonts.find(r=>r.location.equals(this.fontType));if(!e)return this;let s=0,n=0;this.container.removeChildren();for(const r of this.text){const a=e.glyphs[r];if(r!==" "){const o=new I(a.texture);if(o.position.set(s,n+a.bearingY()),this.shadow){const l=new I(a.texture);l.position.set(s+1,n+a.bearingY()+1),l.tint=this.shadowC(),this.container.addChild(l)}this.container.addChild(o),o.tint=this.color}s+=a.getAdvance()}return this}setText(t){return this.text=t,this.draw(),this}setColor(t){return this.color=t,this.draw(),this}}class w{static getAlpha(t){return t>>>24}static getRed(t){return t>>16&255}static getGreen(t){return t>>8&255}static getBlue(t){return t&255}static getArgb(t,e,s,n){return t<<24|e<<16|s<<8|n}static getRgb(t,e,s){return t<<16|e<<8|s}static mixColor(t,e){return w.getArgb(w.getAlpha(t)*w.getAlpha(e)/255,w.getRed(t)*w.getRed(e)/255,w.getGreen(t)*w.getGreen(e)/255,w.getBlue(t)*w.getBlue(e)/255)}}class ot{constructor(t){i(this,"text");this.text=t}asString(){return this.text}append(t){return this.text=t,this}}class h extends ot{}class ${createSprite(t,e,s,n,r,a,o){const l=new I(new H(t,new G(n,r,a,o)));return l.position.set(e,s),l}createStringWithShadow(t,e,s,n){return x.textShadow(t,e,s,n)}createTextWithShadow(t,e,s,n){return x.textShadow(t.asString(),e,s,n)}createCenteredText(t,e,s,n){return x.textShadow(t.asString(),e-x.getWidth(t.asString())/2,s,n)}}const f=class extends ${constructor(t,e,s,n,r){super();i(this,"container");i(this,"initialized");i(this,"width");i(this,"height");i(this,"x");i(this,"y");i(this,"message");i(this,"_message_Gui");i(this,"hovered");i(this,"active",!0);i(this,"visible",!0);i(this,"alpha",1);this.initialized=!1,this.container=new L,this.x=~~t,this.y=~~e,this.width=~~s,this.height=~~n,this.message=r,this.hovered=!1}init(){this.container.visible=this.visible,this.createLayout(),this.initialized=!0}createLayout(){const t=p.getInstance(),e=this.getUY(this.hovered),s=this.createSprite(t.textures[f.WIDGETS_TEXTURE.getFullPath()].baseTexture,0,0,0,46+e*20,this.width/2,20),n=this.createSprite(t.textures[f.WIDGETS_TEXTURE.getFullPath()].baseTexture,this.width/2,0,200-this.width/2,46+e*20,this.width/2,20);s.name="bgL",n.name="bgR",this._message_Gui=this.createCenteredText(this.message,this.width/2,(this.height-8)/2,this.active?f.activeColor:f.lockedColor),this.container.position.set(this.x,this.y),this.container.addChild(s,n,this._message_Gui.container)}updateLayout(){if(!this.initialized)return;const t=this.getUY(this.hovered);this.container.getChildByName("bgL").texture.frame=new G(0,46+t*20,this.width/2,20),this.container.getChildByName("bgR").texture.frame=new G(200-this.width/2,46+t*20,this.width/2,20)}updateGuiTexts(){this._message_Gui&&this._message_Gui.setText(this.message.asString()).setColor(this.active?f.activeColor:f.lockedColor)}update(t,e,s){this.initialized||this.init();const n=this.isOver(t,e);this.hovered&&!n?(this.hovered=!1,this.updateLayout()):n&&!this.hovered&&(this.hovered=!0,this.updateLayout())}tick(){}onClick(t,e){}onRelease(t,e){}onDrag(t,e,s,n){}mouseClicked(t,e,s){return!this.active||!this.visible?!1:this.isValidClickButton(s)&&this.isOver(t,e)?(this.onClick(t,e),p.getInstance().soundManager.play("sounds/click_stereo.ogg",.7),!0):!1}mouseReleased(t,e,s){return this.isValidClickButton(s)?(this.onRelease(t,e),!0):!1}mouseDragged(t,e,s,n,r){return this.isValidClickButton(s)?(this.onDrag(t,e,n,r),!0):!1}mouseMoved(t,e){}mouseScroll(t,e,s){return!1}isMouseOver(t,e){return this.isOver(t,e)}keyPressed(t,e,s){return!1}keyReleased(t,e,s){return!1}charTyped(t){return!1}isOver(t,e){return this.active&&this.visible&&t>=this.x&&e>=this.y&&t<this.x+this.width&&e<this.y+this.height}isValidClickButton(t){return t===0}setMessage(t){this.message=t}getMessage(){return this.message}setWidth(t){this.width=t}getWidth(){return this.width}setActive(t){const e=this.active;this.active=t,e!==this.active&&(this.updateLayout(),this.updateGuiTexts())}setAlpha(t){this.alpha=t,this.container.alpha=t}getUY(t){return this.active?t?2:1:0}};let b=f;i(b,"WIDGETS_TEXTURE",new m("textures/gui/widgets.png")),i(b,"activeColor",16777215),i(b,"lockedColor",10526880);class c extends b{constructor(t,e,s,n,r,a){super(t,e,s,n,r);i(this,"onPress");this.onPress=a}onClick(){this.onPress(this)}}class V extends c{constructor(t,e,s,n,r,a,o,l,C,S){super(t,e,s,n,C,S);i(this,"texture");i(this,"u");i(this,"v");i(this,"hoveredVOffset");this.texture=l,this.u=r,this.v=a,this.hoveredVOffset=o}createLayout(){const t=p.getInstance(),e=this.createSprite(t.textures[this.texture.getFullPath()].baseTexture,0,0,this.u,this.v+(this.hovered?this.hoveredVOffset:0),this.width,this.height);e.name="bg",this.container.position.set(this.x,this.y),this.container.addChild(e)}updateLayout(){!this.initialized||(this.container.getChildByName("bg").texture.frame=new G(this.u,this.v+(this.hovered?this.hoveredVOffset:0),this.width,this.height))}}class _ extends ${constructor(t){super();i(this,"container",new L);i(this,"widgets",[]);i(this,"initialized",!1);i(this,"width",0);i(this,"height",0);i(this,"mc",p.getInstance());i(this,"title");this.title=t}initScreen(t,e,s){this.mc=t,this.width=e,this.height=s,this.container.removeChildren(),this.widgets=[],this.init(),this.initialized=!0}resize(t,e,s){this.initScreen(t,e,s)}init(){}mouseClicked(t,e,s){for(let n=0;n<this.widgets.length;n++)if(this.widgets[n].mouseClicked(t,e,s))return!0;return!1}mouseReleased(t,e,s){return!1}mouseMoved(t,e){}mouseDragged(t,e,s,n,r){return!1}mouseScroll(t,e,s){return!1}isMouseOver(t,e){return!1}keyPressed(t,e,s){return e==="Escape"&&this.shouldCloseOnEsc()?(this.onClose(),!0):!1}keyReleased(t,e,s){return!1}charTyped(t){return!1}tick(){}removed(){}update(t,e,s){if(!!this.initialized)for(let n=0;n<this.widgets.length;n++)this.widgets[n].update(t,e,s)}openURL(t){window.open(t,"_blank","noopener,noreferrer")}shouldCloseOnEsc(){return!0}onClose(){this.mc.setScreen(null)}addWidget(t){return this.widgets.push(t),t.init(),this.container.addChild(t.container),t}addBackground(){var e;const t=(e=this.mc)==null?void 0:e.textures.background;if(t){const s=new q(t,this.width,this.height);s.tileScale.set(2,2);const n=new R;n.beginFill(0,.78),n.drawRect(0,0,this.width,this.height),n.endFill(),this.container.addChild(s,n)}}}const F=class extends _{constructor(t){super(new h(""));i(this,"time");i(this,"speed");i(this,"baseSpeed");i(this,"bg");i(this,"bgOv");i(this,"spaceKeyPressed");i(this,"pressedCtrlKeys",new Set);i(this,"vig");this.time=0,this.baseSpeed=t?.5:.75,this.speed=this.baseSpeed,this.spaceKeyPressed=!1}init(){this.addBackground(),this.addVignette()}update(t,e,s){var n,r,a,o;this.time+=s*this.speed,super.update(t,e,s),this.container.transform.position.set(0,-this.time),(n=this.bg)==null||n.transform.position.set(0,this.time),(r=this.bg)==null||r.tilePosition.set(0,-this.time),(a=this.bgOv)==null||a.transform.position.set(0,this.time),(o=this.vig)==null||o.transform.position.set(0,this.time)}keyPressed(t,e,s){return e==="ControlLeft"||e==="ControlRight"?this.pressedCtrlKeys.add(e):e==="Space"&&(this.spaceKeyPressed=!0),this.speed=this.getSpeed(),super.keyPressed(t,e,s)}keyReleased(t,e,s){return e==="Space"?this.spaceKeyPressed=!1:(e==="ControlLeft"||e==="ControlRight")&&this.pressedCtrlKeys.delete(e),this.speed=this.getSpeed(),super.keyReleased(t,e,s)}getSpeed(){return this.spaceKeyPressed?this.baseSpeed*(F.SPACE_BAR_SPEED_MULTIPLIER+this.pressedCtrlKeys.size*F.CTRL_KEY_SPEED_MULTIPLIER):this.baseSpeed}addBackground(){var e;const t=(e=this.mc)==null?void 0:e.textures.background;t&&(this.bg=new q(t,this.width,this.height),this.bg.tileScale.set(3,3),this.bgOv=new R,this.bgOv.beginFill(0,.82),this.bgOv.drawRect(0,0,this.width,this.height),this.bgOv.endFill(),this.container.addChild(this.bg,this.bgOv))}addVignette(){var e;const t=(e=this.mc)==null?void 0:e.textures.vignette;if(t){this.vig=new et(t,128,128,128,128),this.vig.width=this.width,this.vig.height=this.height;const s=new it.ColorMatrixFilter;s.negative(!0),s.blendMode=2,this.vig.filters=[s],this.container.addChild(this.vig)}}};let B=F;i(B,"SPACE_BAR_SPEED_MULTIPLIER",5),i(B,"CTRL_KEY_SPEED_MULTIPLIER",15);class u{}i(u,"ON",new h("ON")),i(u,"OFF",new h("OFF")),i(u,"DONE",new h("Done")),i(u,"CANCEL",new h("Cancel")),i(u,"YES",new h("Yes")),i(u,"NO",new h("No")),i(u,"PROCEED",new h("Proceed")),i(u,"BACK",new h("Back"));class v extends _{constructor(t,e){super(e);i(this,"prevScreen");this.prevScreen=t}init(){this.addBackground()}onClose(){var t;(t=this.mc)==null||t.setScreen(this.prevScreen)}}const U=class extends v{constructor(t){super(t,new h("Accessibility Settings"));i(this,"_title_Gui")}init(){super.init(),this.addWidget(new c(this.width/2-155,this.height-27,150,20,new h("Accessibility Guide"),()=>{this.openURL(U.GUIDE_URL)})).setActive(!0),this.addWidget(new c(this.width/2+5,this.height-27,150,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,20,16777215),this.container.addChild(this._title_Gui.container)}};let A=U;i(A,"GUIDE_URL","https://aka.ms/MinecraftJavaAccessibility");class j extends v{constructor(t){super(t,new h("Language..."));i(this,"_title_Gui")}init(){super.init(),this.addWidget(new c(this.width/2-155+160,this.height-38,150,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,16,16777215),this.container.addChild(this._title_Gui.container)}}class dt extends v{constructor(t){super(t,new h("Chat Settings"));i(this,"_title_Gui")}init(){super.init(),this.addWidget(new c(this.width/2-100,this.height-27,200,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,20,16777215),this.container.addChild(this._title_Gui.container)}}class ut extends v{constructor(t){super(t,new h("Controls"));i(this,"_title_Gui")}init(){super.init(),this.addWidget(new c(this.width/2-100,this.height-29,200,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,15,16777215),this.container.addChild(this._title_Gui.container)}}class lt extends v{constructor(t){super(t,new h("Chat Settings"));i(this,"_title_Gui")}init(){super.init(),this.addWidget(new c(this.width/2-100,this.height-27,200,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,20,16777215),this.container.addChild(this._title_Gui.container)}}class gt extends v{constructor(t){super(t,new h("Skin Customization"));i(this,"_title_Gui")}init(){super.init(),this.addWidget(new c(this.width/2-100,this.height/6,200,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,20,16777215),this.container.addChild(this._title_Gui.container)}}class wt extends v{constructor(t){super(t,new h("Music and Sound Settings"));i(this,"_title_Gui")}init(){super.init();let t=0,e=0;this.addWidget(new c(this.width/2-100,t+22*((e+=2)>>1),200,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,15,16777215),this.container.addChild(this._title_Gui.container)}}class pt extends v{constructor(t){super(t,new h("Video Settings"));i(this,"_title_Gui")}init(){super.init(),this.addWidget(new c(this.width/2-100,this.height-27,200,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,5,16777215),this.container.addChild(this._title_Gui.container)}}class ft extends _{constructor(t){super(new h("Options"));i(this,"prevScreen");this.prevScreen=t}init(){super.init(),this.addBackground();const t=this.width/2-155,e=this.height/6+48-6;this.addWidget(new c(t+160,this.height/6-12,150,20,new h("Online..."),()=>{this.mc.setScreen(new lt(this))})),this.addWidget(new c(t,e,150,20,new h("Skin Customization..."),()=>{this.mc.setScreen(new gt(this))})),this.addWidget(new c(t+160,e,150,20,new h("Music & Sound..."),()=>{this.mc.setScreen(new wt(this))})),this.addWidget(new c(t,e+24,150,20,new h("Video Settings..."),()=>{this.mc.setScreen(new pt(this))})),this.addWidget(new c(t+160,e+24,150,20,new h("Controls"),()=>{this.mc.setScreen(new ut(this))})),this.addWidget(new c(t,e+48,150,20,new h("Language..."),()=>{this.mc.setScreen(new j(this))})),this.addWidget(new c(t+160,e+48,150,20,new h("Chat Settings..."),()=>{this.mc.setScreen(new dt(this))})),this.addWidget(new c(t,e+72,150,20,new h("Resource Packs..."),()=>{})).setActive(!1),this.addWidget(new c(t+160,e+72,150,20,new h("Accessibility Settings..."),()=>{this.mc.setScreen(new A(this))})),this.addWidget(new c(t+55,e+72+48+6,200,20,u.DONE,()=>{this.mc.setScreen(this.prevScreen)}))}}class mt extends _{constructor(t){super(new h("Create New World"));i(this,"prevScreen");i(this,"createButton");i(this,"_title_Gui");this.prevScreen=t}init(){this.addBackground();const t=this.width/2-155,e=this.width/2+5;this.createButton=this.addWidget(new c(t,this.height-28,150,20,new h("Create World"),()=>{})),this.createButton.setActive(!1),this.addWidget(new c(e,this.height-28,150,20,u.CANCEL,()=>{this.mc.setScreen(this.prevScreen)})),this._title_Gui=this.createCenteredText(this.title,this.width/2,20,16777215),this.container.addChild(this._title_Gui.container)}onClose(){this.mc.setScreen(this.prevScreen)}}class vt extends _{constructor(t){super(new h("Select World"));i(this,"prevScreen");i(this,"deleteButton");i(this,"selectButton");i(this,"editButton");i(this,"recreateButton");i(this,"_title_Gui");this.prevScreen=t}init(){this.addBackground(),this.selectButton=this.addWidget(new c(this.width/2-154,this.height-52,150,20,new h("Play Selected World"),()=>{})),this.addWidget(new c(this.width/2+4,this.height-52,150,20,new h("Create New World"),()=>{this.mc.setScreen(new mt(this))})),this.editButton=this.addWidget(new c(this.width/2-154,this.height-28,72,20,new h("Edit"),()=>{})),this.deleteButton=this.addWidget(new c(this.width/2-76,this.height-28,72,20,new h("Delete"),()=>{})),this.recreateButton=this.addWidget(new c(this.width/2+4,this.height-28,72,20,new h("Re-create"),()=>{})),this.addWidget(new c(this.width/2+82,this.height-28,72,20,u.CANCEL,()=>{this.mc.setScreen(this.prevScreen)})),this.worldSelected(!1),this._title_Gui=this.createCenteredText(this.title,this.width/2,8,16777215),this.container.addChild(this._title_Gui.container)}worldSelected(t){var e,s,n,r;(e=this.selectButton)==null||e.setActive(t),(s=this.deleteButton)==null||s.setActive(t),(n=this.editButton)==null||n.setActive(t),(r=this.recreateButton)==null||r.setActive(t)}}const W=class extends _{constructor(){super(new h(""));i(this,"copyrightTextWidth",0);i(this,"copyrightTextX",0);i(this,"_version_Gui");i(this,"_copy_Gui");i(this,"_copy_Bar")}init(){this.addBackground(),this.copyrightTextWidth=x.getWidth(W.COPYRIGHT),this.copyrightTextX=this.width-this.copyrightTextWidth-2;const t=this.height/4+48,e=this.width/2-100;this.addWidget(new c(e,t,200,20,new h("Singleplayer"),()=>{this.mc.setScreen(new vt(this))})),this.addWidget(new c(e,t+24,200,20,new h("Multiplayer"),()=>{})).setActive(!1),this.addWidget(new c(e,t+48,200,20,new h("Minecraft Realms"),()=>{})).setActive(!1),this.addWidget(new V(e-24,t+72+12,20,20,0,106,20,b.WIDGETS_TEXTURE,new h(""),()=>{this.mc.setScreen(new j(this))})),this.addWidget(new c(e,t+72+12,98,20,new h("Options..."),()=>{this.mc.setScreen(new ft(this))})),this.addWidget(new c(e+102,t+72+12,98,20,new h("Quit Game"),()=>{})).setActive(!1),this.addWidget(new V(e+204,t+72+12,20,20,0,0,20,W.ACCESSIBILITY_ICON_TEXTURE,new h(""),()=>{this.mc.setScreen(new A(this))})),this._version_Gui=this.createStringWithShadow("Minecraft Web v0.0.0",2,this.height-10,16777215),this.container.addChild(this._version_Gui.container),this._copy_Gui=this.createStringWithShadow(W.COPYRIGHT,this.copyrightTextX,this.height-10,16777215),this.container.addChild(this._copy_Gui.container),this._copy_Bar=new R,this._copy_Bar.beginFill(16777215),this._copy_Bar.drawRect(0,0,this.copyrightTextWidth,1),this._copy_Bar.endFill(),this._copy_Bar.position.set(this.copyrightTextX,this.height-1),this._copy_Bar.visible=!1,this.container.addChild(this._copy_Bar)}mouseClicked(t,e,s){return super.mouseClicked(t,e,s)?!0:(t>this.copyrightTextX&&t<this.copyrightTextX+this.copyrightTextWidth&&e>this.height-10&&e<this.height&&this.mc.setScreen(new B(!1)),!1)}update(t,e,s){super.update(t,e,s),this._copy_Bar&&(this._copy_Bar.visible=t>this.copyrightTextX&&t<this.copyrightTextX+this.copyrightTextWidth&&e>this.height-10&&e<this.height)}shouldCloseOnEsc(){return!1}removed(){}};let O=W;i(O,"ACCESSIBILITY_ICON_TEXTURE",new m("textures/gui/accessibility.png")),i(O,"COPYRIGHT","Give me some copyrights. Do not explode!");const D=class{constructor(t){i(this,"container");i(this,"mc");i(this,"bar");i(this,"progress",0);i(this,"waitForFading",0);i(this,"isFading",!1);this.mc=t,this.container=new L}init(){const t=window.innerWidth/3,e=window.innerHeight/3,s=new R;s.beginFill(D.MONOCHROME_BLACK),s.drawRect(0,0,t,e),s.endFill(),s.name="bg",this.container.addChild(s),this.bar=new R,this.setProgress(0),this.bar.position.set(t/2-100,e/2+20),this.container.addChild(this.bar)}setProgress(t){var e,s,n,r,a,o,l,C,S,y;this.progress=t,(e=this.bar)==null||e.clear(),(s=this.bar)==null||s.beginFill(16777215,this.isFading?this.container.alpha:1),(n=this.bar)==null||n.drawRect(0,0,200,14),(r=this.bar)==null||r.endFill(),(a=this.bar)==null||a.beginFill(D.MONOCHROME_BLACK,this.isFading?this.container.alpha:1),(o=this.bar)==null||o.drawRect(1,1,198,12),(l=this.bar)==null||l.endFill(),(C=this.bar)==null||C.beginFill(16777215,this.isFading?this.container.alpha:1),(S=this.bar)==null||S.drawRect(2,2,196*this.progress,10),(y=this.bar)==null||y.endFill()}update(t){this.progress===1&&!this.isFading&&(this.waitForFading+=t*.1),this.waitForFading>=1&&!this.isFading&&(this.isFading=!0,this.mc.setScreen(new O)),this.isFading&&(this.container.alpha-=t*.05,this.setProgress(1)),this.container.alpha<=0&&this.mc.setOverlay(null)}};let N=D;i(N,"MONOCHROME_BLACK",w.getRgb(0,0,0));class Ct{constructor(t){i(this,"mc");i(this,"cX");i(this,"cY");this.mc=t,this.cX=-1,this.cY=-1}cursorMove(t,e){this.cX=t,this.cY=e}cursorButton(t,e,s,n){if(this.mc.screen){const r=t/3,a=e/3;n===1&&this.mc.screen.mouseClicked(r,a,s)}}keyPress(t,e,s,n){this.mc.screen&&(n===1?this.mc.screen.keyPressed(t,e,s):this.mc.screen.keyReleased(t,e,s))}setup(){document.addEventListener("mousemove",t=>this.cursorMove(t.clientX,t.clientY)),document.addEventListener("mousedown",t=>this.cursorButton(t.clientX,t.clientY,t.button,1)),document.addEventListener("mouseup",t=>this.cursorButton(t.clientX,t.clientY,t.button,0)),document.addEventListener("keydown",t=>this.keyPress(t.key,t.code,t.keyCode,1)),document.addEventListener("keyup",t=>this.keyPress(t.key,t.code,t.keyCode,0))}getX(){return this.cX}getY(){return this.cY}}class yt{constructor(t){i(this,"mc");i(this,"audioCtx");i(this,"sounds",new Map);this.mc=t,this.audioCtx=new AudioContext({})}async load(){const e=await(await fetch("sounds/click_stereo.ogg")).arrayBuffer(),s=await this.audioCtx.decodeAudioData(e);this.sounds.set("sounds/click_stereo.ogg",s)}play(t,e){if(!this.sounds.has(t))return;const s=this.audioCtx.createGain();s.gain.value=e,s.connect(this.audioCtx.destination);const n=this.audioCtx.createBufferSource();n.buffer=this.sounds.get(t),n.connect(s),n.start()}}class xt{constructor(t,e){i(this,"tickDelta",0);i(this,"lastFrameDuration",0);i(this,"prevTimeMillis");i(this,"tickTime");this.tickDelta=0,this.lastFrameDuration=0,this.tickTime=1e3/t,this.prevTimeMillis=e}beginRenderTick(t){this.lastFrameDuration=(t-this.prevTimeMillis)/this.tickTime,this.prevTimeMillis=t,this.tickDelta+=this.lastFrameDuration;let e=~~this.tickDelta;return this.tickDelta-=e,e}}const M=class{constructor(){i(this,"screen");i(this,"overlay");i(this,"renderer");i(this,"loader");i(this,"textures");i(this,"inputHandler");i(this,"root");i(this,"clipboard");i(this,"renderTickCounter",new xt(20,0));i(this,"fps",0);i(this,"nextUpdateTime",0);i(this,"currFps",0);i(this,"fonts",[]);i(this,"soundManager");M.instance=this,this.renderer=st({width:window.innerWidth,height:window.innerHeight,resolution:window.devicePixelRatio||1}),this.screen=null,this.overlay=null,this.loader=new nt,this.textures={},this.inputHandler=new Ct(this),this.inputHandler.setup(),this.root=new L,this.root.scale.set(3,3),this.root.sortableChildren=!0,this.clipboard=new ct,this.soundManager=new yt(this)}async run(){var s;rt.SCALE_MODE=ht.NEAREST,document.body.appendChild(this.renderer.view),this.setOverlay(new N(this)),window.addEventListener("resize",()=>{this.windowResized()}),this.nextUpdateTime=Date.now();const t=()=>{this.update(),requestAnimationFrame(t)};requestAnimationFrame(t);const e=n=>new Promise(r=>{this.loader.add(n).load(()=>{r(this.loader.resources[n])})});for(const n of Object.values(Y)){const r=await(await fetch(`font/${n.path}.json`)).json(),a={};for(const o of r.providers){const l=new m(o.file),C=await e(`textures/${l.path}`),S=C.data,y=C.texture,z=(s=o.ascent)!=null?s:7,J=y.width,Q=y.height,P=J/o.chars[0].length,E=Q/o.chars.length;for(let k=0;k<o.chars.length;k++){let X=0;for(const K of o.chars[k])K!==" "&&(a[K]=new T(y,X*P,k*E,P,E,T.getActualGlyphWidth(S,X*P,k*E,P,E)+1,z)),X++}a[" "]=new T(y,0,0,4,E,4,z)}this.fonts.push({location:n,glyphs:a})}this.overlay&&this.overlay.setProgress(.5),await new Promise(n=>setTimeout(n,1e3)),await this.soundManager.load(),this.overlay&&this.overlay.setProgress(.7),this.loader.add([{name:"minecraft:textures/gui/widgets.png",url:"textures/gui/widgets.png"},{name:"background",url:"textures/gui/background.png"},{name:"vignette",url:"textures/misc/vignette.png"},{name:"minecraft:textures/gui/accessibility.png",url:"textures/gui/accessibility.png"}]).load(()=>{this.textures["minecraft:textures/gui/widgets.png"]=this.loader.resources["minecraft:textures/gui/widgets.png"].texture,this.textures.background=this.loader.resources.background.texture,this.textures.vignette=this.loader.resources.vignette.texture,this.textures["minecraft:textures/gui/accessibility.png"]=this.loader.resources["minecraft:textures/gui/accessibility.png"].texture,this.overlay&&this.overlay.setProgress(1)})}windowResized(){this.screen&&this.screen.resize(this,window.innerWidth/3,window.innerHeight/3)}update(){const t=this.renderTickCounter.beginRenderTick(Date.now());let e=0;for(e=0;e<Math.min(10,t);++e)this.tick();for(this.overlay&&this.overlay.update(this.renderTickCounter.lastFrameDuration),this.screen&&this.screen.update(this.inputHandler.getX()/3,this.inputHandler.getY()/3,this.renderTickCounter.lastFrameDuration),++this.fps;Date.now()>=this.nextUpdateTime+1e3;)this.currFps=this.fps,this.nextUpdateTime+=1e3,this.fps=0;this.renderer.render(this.root)}tick(){this.screen&&this.screen.tick()}setScreen(t){this.screen&&(this.screen.removed(),this.screen.container.parent.removeChild(this.screen.container)),this.screen=t,this.screen===null&&(this.screen=new O),this.screen&&(this.screen.initScreen(this,window.innerWidth/3,window.innerHeight/3),this.root.addChild(this.screen.container))}setOverlay(t){this.overlay&&this.overlay.container.parent.removeChild(this.overlay.container),this.overlay=t,this.overlay&&(this.overlay.init(),this.overlay.container.zIndex=200,this.root.addChild(this.overlay.container))}static getInstance(){return M.instance}};let p=M;i(p,"instance");const St=new p;St.run();
